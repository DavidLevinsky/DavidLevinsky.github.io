{"version":3,"sources":["webpack://vts/webpack/bootstrap","webpack://vts/./src/core/map/loader/worker-globals.js","webpack://vts/./src/core/map/loader/worker-mesh.js","webpack://vts/./src/core/utils/matrix.js","webpack://vts/./src/core/utils/math.js","webpack://vts/./src/core/utils/url.js","webpack://vts/./src/core/utils/utils.js","webpack://vts/./src/core/map/geodata-import/3dtiles2.js","webpack://vts/./src/core/map/loader/worker-main.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","globals","parseSubmesh","mesh","stream","submesh","valid","streamData","data","flags","getUint8","index","version","surfaceReference","textureLayer","getUint16","textureLayer2","bboxMin","bboxMax","getFloat64","parseHeader","tmpVertices","tmpExternalUVs","tmpInternalUVs","uint8Data","use16bit","config","map16bitMeshes","onlyOneUVs","mapOnlyOneUVs","numVertices","quant","vindex","li","bmin","bmax","center","scale","Math","abs","max","multiplier","externalUVs","vertices","Uint16Array","Float32Array","x","y","z","cx","cy","cz","mx","my","mz","sx","sy","sz","res","parseDelta","uvindex","numUVs","quantU","quantV","multiplierU","multiplierV","internalUVs","numFaces","indices","onlyExternalIndices","mapIndexBuffers","onlyInternalIndices","onlyIndices","v1","v2","v3","vv1","vv2","vv3","vtmp","eUVs","iUVs","high","parseWord","sindex","length","size","byteLength","faces","parseVerticesAndFaces2","uvfactor","parseVerticesAndFaces","vec3","a","b","Array","e","g","sqrt","j","dd","f","dx","dy","dz","mat3","mat4","h","k","A","B","u","v","w","C","D","E","q","F","G","sin","cos","tan","PI","frustum","identity","math","value2","delta","min","degrees","radians","left","right","bottom","top","near","far","transpose","fovy","aspect","ymax","xmax","frustumMatrix","vsize","axis","angle","ca","sa","scaleMatrix","tx","ty","tz","translationMatrix","utilsUrl","url","docHost","document","location","hostname","parse","parser","createElement","queryString","vars","substring","split","pair","arr","push","href","indexOf","protocol","origin","port","slice","join","link","originUrl","trim","baseUrl","getBase","baseUrlSchema","getSchema","baseUrlOrigin","getOrigin","utils","defaultValue","minValue","maxValue","clamp","array","arraySize","minValues","maxValues","defaultValues","isArray","width","binary","exponent","fraction","NaN","Infinity","pow","str","obj","replace","match","plain","simpleFmtObj","Date","getFullYear","urls","code","result","exec","parseInt","fn","round","log","LN2","ceil","hash","charCodeAt","cb","cr","getHash","convertRGB2YCbCr","counter","floor","convertHSL2RGB","path","onLoaded","onError","withCredentials","xhrParams","loadJSON","DOMParser","parseFromString","skipParse","xhr","XMLHttpRequest","onreadystatechange","readyState","status","response","parsedData","JSON","console","this","open","setRequestHeader","overrideMimeType","send","responseType","abuffer","getAllResponseHeaders","onerror","onload","direct","image","Image","crossOrigin","src","getParamsFromUrl","textDecoderUtf8","TextDecoder","unint8ArrayToString","decode","code_points2","Uint8Array","set","code_points","Uint32Array","buffer","cp","String","fromCharCode","MapGeodataImport3DTiles2","bintree","pathTable","totalNodes","pathTableSize","nodesIndex","rootSize","countNode","node","onlyChildren","content","tmp","ext","pop","stmp","children","processNodeOctant","originalOctant","fname","octant","processNode","lod","index2","child","boundingVolume","extras","childIndex","testCount","processJSON","json","options","rootPath","root","points","yv","xv","zv","rootPoints","rootCenter","rootRadius","distance","rootTexelSize","magic","meanUndulation","numSubmeshes","submeshes","gpuSize","transferables","packedEvents","packedTransferables","postPackedMessage","message","mapPackLoaderEvents","concat","postMessage","loadBinary","kind","createImageBitmap","then","bitmap","DataView","geodata","parse3DTile","self","onmessage"],"mappings":"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","file":"c1b51ed077ca0a6ba8e0.worker.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","\nvar globals = {};\n\nexport {globals};\n","\nimport {globals as globals_} from './worker-globals.js';\n\n//get rid of compiler mess\nvar globals = globals_;\n\nvar flagsInternalTexcoords =  1;\nvar flagsExternalTexcoords =  2;\nvar flagsPerVertexUndulation =  4;\nvar flagsTextureMode =  8;\n\n\nfunction parseMesh(stream) {\n    /*\n    struct MapMesh {\n        struct MapMeshHeader {\n            char magic[2];                // letters \"ME\"\n            ushort version;               // currently 1\n            double meanUndulation;        // read more about undulation below\n            ushort numSubmeshes;          // number of submeshes\n        } header;\n        struct Submesh submeshes [];      // array of submeshes, size of array is defined by numSubmeshes property\n    };\n    */\n\n    var mesh = {}, i, li, submesh;\n\n    //parase header\n    var streamData = stream.data;\n    var magic = '';\n\n    if (streamData.length < 2) {\n        return false;\n    }\n\n    magic += String.fromCharCode(streamData.getUint8(stream.index, true)); stream.index += 1;\n    magic += String.fromCharCode(streamData.getUint8(stream.index, true)); stream.index += 1;\n\n    if (magic != 'ME') {\n        return false;\n    }\n\n    mesh.version = streamData.getUint16(stream.index, true); stream.index += 2;\n\n    if (mesh.version > 3) {\n        return false;\n    }\n    \n    stream.uint8Data = new Uint8Array(stream.data.buffer);\n\n    mesh.meanUndulation = streamData.getFloat64(stream.index, true); stream.index += 8;\n    mesh.numSubmeshes = streamData.getUint16(stream.index, true); stream.index += 2;\n\n    mesh.submeshes = [];\n    mesh.gpuSize = 0; \n    mesh.faces = 0;\n    mesh.size = 0;\n\n    var use16bit = globals.config.map16bitMeshes;\n\n    for (i = 0, li = mesh.numSubmeshes; i < li; i++) {\n        var submesh = parseSubmesh(mesh, stream);\n        if (submesh.valid) {\n            mesh.submeshes.push(submesh); \n            mesh.size += submesh.size;\n            mesh.faces += submesh.faces;\n\n            //aproximate size\n            mesh.gpuSize += submesh.size;\n        }\n    }\n    \n    mesh.numSubmeshes = mesh.submeshes.length;\n\n    //prevent minification\n\n    var submeshes = [];\n    var transferables = [];\n\n    for (i = 0, li = mesh.numSubmeshes; i < li; i++) {\n        submesh = mesh.submeshes[i];\n        submeshes.push({\n\n            'bboxMax': submesh.bboxMax,\n            'bboxMin': submesh.bboxMin,\n            'externalUVs': (submesh.externalUVs) ? submesh.externalUVs.buffer : null,\n            'faces': submesh.faces,\n            'flags': submesh.flags,\n            'gpuSize': submesh.gpuSize,\n            'indices': (submesh.indices) ? submesh.indices.buffer : null,\n            'internalUVs': (submesh.internalUVs) ? submesh.internalUVs.buffer : null,\n            'size': submesh.size,\n            'surfaceReference': submesh.surfaceReference,\n            'textureLayer': submesh.textureLayer,\n            'textureLayer2': submesh.textureLayer2,\n            //'valid': submesh.valid\n            'vertices': submesh.vertices.buffer\n\n        });\n\n        if (submesh.externalUVs) transferables.push(submesh.externalUVs.buffer);\n        if (submesh.internalUVs) transferables.push(submesh.internalUVs.buffer);\n        if (submesh.vertices) transferables.push(submesh.vertices.buffer);\n        if (submesh.indices) transferables.push(submesh.indices.buffer);\n    }\n\n    return { mesh:{\n               'faces': mesh.faces,\n               'gpuSize': mesh.gpuSize,\n               'meanUndulation': mesh.meanUndulation,\n               'numSubmeshes': mesh.numSubmeshes,\n               'size': mesh.size,\n               'submeshes': mesh.submeshes,\n               'version': mesh.version\n             },\n             transferables:transferables\n           };\n};\n\n\nfunction parseSubmesh(mesh, stream) {\n    /*\n    struct MapSubmesh {\n        struct MapSubmeshHeader header;\n        struct VerticesBlock vertices;\n        struct TexcoordsBlock internalTexcoords;   // if header.flags & ( 1 << 0 )\n        struct FacesBlock faces;\n    };\n    */\n\n    var submesh = { valid:true };\n\n    parseHeader(mesh, submesh, stream);\n    if (mesh.version >= 3) {\n        parseVerticesAndFaces2(mesh, submesh, stream);\n    } else {\n        parseVerticesAndFaces(mesh, submesh, stream);\n    }\n\n    return submesh;\n};\n\n\nfunction parseHeader(mesh, submesh, stream) {\n    /*\n    struct MapSubmeshHeader {\n        char flags;                    // bit 0 - contains internal texture coords\n                                       // bit 1 - contains external texture coords\n                                       // bit 2 - contains per vertex undulation\n                                       // bit 3 - texture mode (0 - internal, 1 - external)\n        \n        uchar surfaceReference;        // reference to the surface of origin, see bellow\n        ushort textureLayer;           // applicable if texture mode is external: texture layer numeric id\n        double boundingBox[2][3];      // read more about bounding box bellow\n    };\n    */\n\n    //debugger\n    var streamData = stream.data;\n\n    submesh.flags = streamData.getUint8(stream.index, true); stream.index += 1;\n\n    if (mesh.version > 1) {\n        submesh.surfaceReference = streamData.getUint8(stream.index, true); stream.index += 1;\n    } else {\n        submesh.surfaceReference = 0;\n    }\n\n    submesh.textureLayer = streamData.getUint16(stream.index, true); stream.index += 2;\n    submesh.textureLayer2 = submesh.textureLayer; //hack for presentation\n\n    var bboxMin = [];\n    var bboxMax = [];\n\n    bboxMin[0] = streamData.getFloat64(stream.index, true); stream.index += 8;\n    bboxMin[1] = streamData.getFloat64(stream.index, true); stream.index += 8;\n    bboxMin[2] = streamData.getFloat64(stream.index, true); stream.index += 8;\n\n    bboxMax[0] = streamData.getFloat64(stream.index, true); stream.index += 8;\n    bboxMax[1] = streamData.getFloat64(stream.index, true); stream.index += 8;\n    bboxMax[2] = streamData.getFloat64(stream.index, true); stream.index += 8;\n    \n    submesh.bboxMin = bboxMin;\n    submesh.bboxMax = bboxMax;\n};\n\n\nfunction parseVerticesAndFaces(mesh, submesh, stream) {\n    /*\n    struct VerticesBlock {\n        ushort numVertices;              // number of vertices\n\n        struct Vertex {                  // array of vertices, size of array is defined by numVertices property\n            // vertex coordinates\n            ushort x;\n            ushort y;\n            ushort z;\n\n            // if header.flags & ( 1 << 1 ): external texture coordinates\n            // values in 2^16^ range represents the 0..1 normalized texture space\n            ushort eu;\n            ushort ev;\n\n            // if header.flags & ( 1 << 2 ): undulation delta\n            float16 undulationDelta;\n        } vertices[];\n    };\n    */\n\n    var data = stream.data;\n    var index = stream.index;\n    var uint8Data = stream.uint8Data;\n\n    var use16bit = globals.config.map16bitMeshes;\n\n    var numVertices = data.getUint16(index, true); index += 2;\n\n    if (!numVertices) {\n        submesh.valid = false;\n    }\n\n    var internalUVs = null;\n    var externalUVs = null;\n    var onlyOneUVs = globals.config.mapOnlyOneUVs && (submesh.flags & flagsInternalTexcoords);\n    var tmpVertices, tmpExternalUVs, tmpInternalUVs;\n\n    var vertices = use16bit ? (new Uint16Array(numVertices * 3)) : (new Float32Array(numVertices * 3));\n\n    if (submesh.flags & flagsExternalTexcoords) {\n        if (onlyOneUVs) {\n            externalUVs = true;\n        } else {\n            externalUVs = use16bit ? (new Uint16Array(numVertices * 2)) : (new Float32Array(numVertices * 2));\n        }\n    }\n\n    var uvfactor = use16bit ? 1.0 : (1.0 / 65535);\n    var vindex = 0;\n    var uvindex = 0;\n    var i, li;\n\n    for (i = 0; i < numVertices; i++) {\n        vertices[vindex] = (uint8Data[index] + (uint8Data[index + 1]<<8)) * uvfactor;\n        vertices[vindex+1] = (uint8Data[index+2] + (uint8Data[index + 3]<<8)) * uvfactor;\n        vertices[vindex+2] = (uint8Data[index+4] + (uint8Data[index + 5]<<8)) * uvfactor;\n        vindex += 3;\n\n        if (externalUVs) {\n            if (!onlyOneUVs) {\n                externalUVs[uvindex] = (uint8Data[index+6] + (uint8Data[index + 7]<<8)) * uvfactor;\n                externalUVs[uvindex+1] = (65535 - (uint8Data[index+8] + (uint8Data[index + 9]<<8))) * uvfactor;\n                uvindex += 2;\n            }\n            index += 10;\n        } else {\n            index += 6;\n        }\n    }\n\n\n    tmpVertices = vertices;\n    tmpExternalUVs = externalUVs;\n   \n    /*\n    struct TexcoorsBlock {\n        ushort numTexcoords;              // number of texture coordinates\n\n        struct TextureCoords {            // array of texture coordinates, size of array is defined by numTexcoords property\n\n            // internal texture coordinates\n            // values in 2^16^ range represents the 0..1 normalized texture space\n            ushort u;\n            ushort v;\n        } texcoords[];\n    };\n    */\n\n    if (submesh.flags & flagsInternalTexcoords) {\n        var numUVs = data.getUint16(index, true); index += 2;\n    \n        internalUVs = use16bit ? (new Uint16Array(numUVs * 2)) : (new Float32Array(numUVs * 2));\n        //var uvfactor = 1.0 / 65535;\n    \n        for (i = 0, li = numUVs * 2; i < li; i+=2) {\n            internalUVs[i] = (uint8Data[index] + (uint8Data[index + 1]<<8)) * uvfactor;\n            internalUVs[i+1] = (65535 - (uint8Data[index+2] + (uint8Data[index + 3]<<8))) * uvfactor;\n            index += 4;\n        }\n    \n        tmpInternalUVs = internalUVs;\n    }\n\n    /*\n    struct FacesBlock {\n        ushort numFaces;              // number of faces\n\n        struct Face {                 // array of faces, size of array is defined by numFaces property\n\n            ushort v[3]; // array of indices to stored vertices\n            ushort t[3]; // if header.flags & ( 1 << 0 ): array of indices to stored internal texture coords\n\n        } faces[];\n    };\n    */\n\n    var numFaces = data.getUint16(index, true); index += 2;\n    var indices = null;\n\n    internalUVs = null;\n    externalUVs = null;\n\n    var onlyExternalIndices = (globals.config.mapIndexBuffers && globals.config.mapOnlyOneUVs && !(submesh.flags & flagsInternalTexcoords));\n    var onlyInternalIndices = (globals.config.mapIndexBuffers && globals.config.mapOnlyOneUVs && (submesh.flags & flagsInternalTexcoords));\n    var onlyIndices = onlyExternalIndices || onlyInternalIndices;\n\n    if (onlyIndices) {\n        indices = new Uint16Array(numFaces * 3);\n    } else {\n        vertices = use16bit ? (new Uint16Array(numFaces * 3 * 3)) : (new Float32Array(numFaces * 3 * 3));\n\n        if (submesh.flags & flagsInternalTexcoords) {\n            internalUVs = use16bit ? (new Uint16Array(numFaces * 3 * 2)) : (new Float32Array(numFaces * 3 * 2));\n        }\n\n        if (!onlyOneUVs && (submesh.flags & flagsExternalTexcoords)) {\n            externalUVs = use16bit ? (new Uint16Array(numFaces * 3 * 2)) : (new Float32Array(numFaces * 3 * 2));\n        }\n    }\n\n    var vtmp = tmpVertices;\n    var eUVs = tmpExternalUVs;\n    var iUVs = tmpInternalUVs;\n    var v1, v2, v3, vv1, vv2, vv3, sindex;\n\n    if (onlyExternalIndices) {\n        vertices = tmpVertices;\n        externalUVs = tmpExternalUVs;\n    }\n\n    if (onlyInternalIndices) {\n        vertices = use16bit ? (new Uint16Array((iUVs.length / 2) * 3)) : (new Float32Array((iUVs.length / 2) * 3));\n        internalUVs = tmpInternalUVs;\n    }\n\n    for (i = 0; i < numFaces; i++) {\n        v1 = (uint8Data[index] + (uint8Data[index + 1]<<8));\n        v2 = (uint8Data[index+2] + (uint8Data[index + 3]<<8));\n        v3 = (uint8Data[index+4] + (uint8Data[index + 5]<<8));\n\n        if (onlyIndices) {\n            vindex = i * 3;\n\n            if (internalUVs != null) {\n                vv1 = (uint8Data[index+6] + (uint8Data[index + 7]<<8));\n                vv2 = (uint8Data[index+8] + (uint8Data[index + 9]<<8));\n                vv3 = (uint8Data[index+10] + (uint8Data[index + 11]<<8));\n\n                vertices[vv1*3] = vtmp[v1*3];\n                vertices[vv1*3+1] = vtmp[v1*3+1];\n                vertices[vv1*3+2] = vtmp[v1*3+2];\n\n                vertices[vv2*3] = vtmp[v2*3];\n                vertices[vv2*3+1] = vtmp[v2*3+1];\n                vertices[vv2*3+2] = vtmp[v2*3+2];\n\n                vertices[vv3*3] = vtmp[v3*3];\n                vertices[vv3*3+1] = vtmp[v3*3+1];\n                vertices[vv3*3+2] = vtmp[v3*3+2];\n\n                indices[vindex] = vv1;\n                indices[vindex+1] = vv2;\n                indices[vindex+2] = vv3;\n\n                index += 12;\n            } else {\n                indices[vindex] = v1;\n                indices[vindex+1] = v2;\n                indices[vindex+2] = v3;\n\n                index += 6;\n            }\n\n        } else {\n            vindex = i * (3 * 3);\n\n            sindex = v1 * 3;\n            vertices[vindex] = vtmp[sindex];\n            vertices[vindex+1] = vtmp[sindex+1];\n            vertices[vindex+2] = vtmp[sindex+2];\n\n            sindex = v2 * 3;\n            vertices[vindex+3] = vtmp[sindex];\n            vertices[vindex+4] = vtmp[sindex+1];\n            vertices[vindex+5] = vtmp[sindex+2];\n\n            sindex = v3 * 3;\n            vertices[vindex+6] = vtmp[sindex];\n            vertices[vindex+7] = vtmp[sindex+1];\n            vertices[vindex+8] = vtmp[sindex+2];\n\n            if (externalUVs != null) {\n                vindex = i * (3 * 2);\n                externalUVs[vindex] = eUVs[v1*2];\n                externalUVs[vindex+1] = eUVs[v1*2+1];\n                externalUVs[vindex+2] = eUVs[v2*2];\n                externalUVs[vindex+3] = eUVs[v2*2+1];\n                externalUVs[vindex+4] = eUVs[v3*2];\n                externalUVs[vindex+5] = eUVs[v3*2+1];\n            }\n\n            if (internalUVs != null) {\n                v1 = (uint8Data[index+6] + (uint8Data[index + 7]<<8));\n                v2 = (uint8Data[index+8] + (uint8Data[index + 9]<<8));\n                v3 = (uint8Data[index+10] + (uint8Data[index + 11]<<8));\n                index += 12;\n\n                vindex = i * (3 * 2);\n                internalUVs[vindex] = iUVs[v1*2];\n                internalUVs[vindex+1] = iUVs[v1*2+1];\n                internalUVs[vindex+2] = iUVs[v2*2];\n                internalUVs[vindex+3] = iUVs[v2*2+1];\n                internalUVs[vindex+4] = iUVs[v3*2];\n                internalUVs[vindex+5] = iUVs[v3*2+1];\n            } else {\n                index += 6;\n            }\n        }\n    }\n\n    submesh.vertices = vertices;\n    submesh.internalUVs = internalUVs;\n    submesh.externalUVs = externalUVs;\n    submesh.indices = indices;\n\n    tmpVertices = null;\n    tmpInternalUVs = null;\n    tmpExternalUVs = null;\n\n    stream.index = index;\n\n    submesh.size = submesh.vertices.byteLength;\n    if (submesh.internalUVs) submesh.size += submesh.internalUVs.byteLength;\n    if (submesh.externalUVs) submesh.size += submesh.externalUVs.byteLength;\n    if (submesh.indices) submesh.size += submesh.indices.byteLength;\n    submesh.faces = numFaces;\n};\n\n\nfunction parseWord(data, res) {\n    var value = data[res[1]];\n    \n    if (value & 0x80) {\n        res[0] = (value & 0x7f) | (data[res[1]+1] << 7);\n        res[1] += 2;\n    } else {\n        res[0] = value;\n        res[1] ++;\n    }\n};\n\n\nfunction parseDelta(data, res) {\n    var value = data[res[1]];\n    \n    if (value & 0x80) {\n        value = (value & 0x7f) | (data[res[1]+1] << 7);\n\n        if (value & 1) {\n            res[0] = -((value >> 1)+1); \n            res[1] += 2;\n        } else {\n            res[0] = (value >> 1); \n            res[1] += 2;\n        }\n    } else {\n        if (value & 1) {\n            res[0] = -((value >> 1)+1); \n            res[1] ++;\n        } else {\n            res[0] = (value >> 1); \n            res[1] ++;\n        }\n    }\n};\n\n\nfunction parseVerticesAndFaces2(mesh, submesh, stream) {\n    /*\n    struct VerticesBlock {\n        ushort numVertices;              // number of vertices\n        ushort geomQuantCoef;            // geometry quantization coefficient\n\n        struct Vertex {                  // array of vertices, size of array is defined by numVertices property\n            // vertex coordinates\n            delta x;\n            delta y;\n            delta z;\n        } vertices[];\n    };\n    */\n\n    var data = stream.data;\n    var index = stream.index;\n    var uint8Data = stream.uint8Data;\n\n    var use16bit = globals.config.map16bitMeshes;\n    var onlyOneUVs = globals.config.mapOnlyOneUVs && (submesh.flags & flagsInternalTexcoords);\n    var tmpVertices, tmpExternalUVs, tmpInternalUVs;\n\n    var numVertices = data.getUint16(index, true); index += 2;\n    var quant = data.getUint16(index, true); index += 2;\n\n    if (!numVertices) {\n        submesh.valid = false;\n    }\n\n    var bmin = submesh.bboxMin;\n    var bmax = submesh.bboxMax;\n\n    var center = [(bmin[0] + bmax[0])*0.5, (bmin[1] + bmax[1])*0.5, (bmin[2] + bmax[2])*0.5];\n    var scale = Math.abs(Math.max(bmax[0] - bmin[0], bmax[1] - bmin[1], bmax[2] - bmin[2]));\n\n    var multiplier = 1.0 / quant;\n    var externalUVs = null;\n\n    var vertices = use16bit ? (new Uint16Array(numVertices * 3)) : (new Float32Array(numVertices * 3));\n    var vindex;\n    \n    var x = 0, y = 0,z = 0;\n    var cx = center[0], cy = center[1], cz = center[2];\n    var mx = bmin[0];\n    var my = bmin[1];\n    var mz = bmin[2];\n    var sx = 1.0 / (bmax[0] - bmin[0]);\n    var sy = 1.0 / (bmax[1] - bmin[1]);\n    var sz = 1.0 / (bmax[2] - bmin[2]);\n    \n    var res = [0, index];\n    var i, li, t;\n\n    if (use16bit) {\n        for (i = 0; i < numVertices; i++) {\n            parseDelta(uint8Data, res);\n            x += res[0];\n            parseDelta(uint8Data, res);\n            y += res[0];\n            parseDelta(uint8Data, res);\n            z += res[0];\n            \n            vindex = i * 3;\n            t = ((x * multiplier * scale + cx) - mx) * sx;\n            if (t < 0) t = 0; if (t > 1.0) t = 1.0;\n            vertices[vindex] = t * 65535;\n            t = ((y * multiplier * scale + cy) - my) * sy;\n            if (t < 0) t = 0; if (t > 1.0) t = 1.0;\n            vertices[vindex+1] = t * 65535;\n            t = ((z * multiplier * scale + cz) - mz) * sz;\n            if (t < 0) t = 0; if (t > 1.0) t = 1.0;\n            vertices[vindex+2] = t * 65535;\n        }\n    } else {\n        for (i = 0; i < numVertices; i++) {\n            parseDelta(uint8Data, res);\n            x += res[0];\n            parseDelta(uint8Data, res);\n            y += res[0];\n            parseDelta(uint8Data, res);\n            z += res[0];\n            \n            vindex = i * 3;\n            vertices[vindex] = ((x * multiplier * scale + cx) - mx) * sx;\n            vertices[vindex+1] = ((y * multiplier * scale + cy) - my) * sy;\n            vertices[vindex+2] = ((z * multiplier * scale + cz) - mz) * sz;\n        }\n    }\n    \n    index = res[1];\n\n    if (submesh.flags & flagsExternalTexcoords) {\n        quant = data.getUint16(index, true); index += 2;\n        res[1] = index;\n\n        if (onlyOneUVs) {\n\n            for (i = 0; i < numVertices; i++) {\n                parseDelta(uint8Data, res);\n                parseDelta(uint8Data, res);\n            }\n\n        } else {\n            multiplier = (use16bit) ? (65535 / quant) : (1.0 / quant);\n            externalUVs = use16bit ? (new Uint16Array(numVertices * 2)) : (new Float32Array(numVertices * 2));\n            x = 0, y = 0;\n\n            if (use16bit) {\n                for (i = 0; i < numVertices; i++) {\n                    parseDelta(uint8Data, res);\n                    x += res[0];\n                    parseDelta(uint8Data, res);\n                    y += res[0];\n\n                    var uvindex = i * 2;\n                    t = x * multiplier;\n                    if (t < 0) t = 0; if (t > 65535) t = 65535;\n                    externalUVs[uvindex] = t;\n                    t = y * multiplier;\n                    if (t < 0) t = 0; if (t > 65535) t = 65535;\n                    externalUVs[uvindex+1] = 65535 - t;\n                }\n            } else {\n                for (i = 0; i < numVertices; i++) {\n                    parseDelta(uint8Data, res);\n                    x += res[0];\n                    parseDelta(uint8Data, res);\n                    y += res[0];\n\n                    var uvindex = i * 2;\n                    externalUVs[uvindex] = x * multiplier;\n                    externalUVs[uvindex+1] = 1 - (y * multiplier);\n                }\n            }\n        }\n    }\n\n    index = res[1];\n\n    tmpVertices = vertices;\n    tmpExternalUVs = externalUVs;\n    \n    /*\n    struct TexcoorsBlock {\n        ushort numTexcoords;              // number of texture coordinates\n\n        struct TextureCoords {            // array of texture coordinates, size of array is defined by numTexcoords property\n\n            // internal texture coordinates\n            // values in 2^16^ range represents the 0..1 normalized texture space\n            ushort u;\n            ushort v;\n        } texcoords[];\n    };\n    */\n\n    if (submesh.flags & flagsInternalTexcoords) {\n        var numUVs = data.getUint16(index, true); index += 2;\n        var quantU = data.getUint16(index, true); index += 2;\n        var quantV = data.getUint16(index, true); index += 2;\n        var multiplierU = (use16bit) ? (65536.0 / quantU) : (1.0 / quantU);\n        var multiplierV = (use16bit) ? (65536.0 / quantV) : (1.0 / quantV);\n        x = 0, y = 0;\n    \n        var internalUVs = use16bit ? (new Uint16Array(numUVs * 2)) : (new Float32Array(numUVs * 2));\n        res[1] = index;7\n\n        if (use16bit) {\n            for (i = 0, li = numUVs * 2; i < li; i+=2) {\n                parseDelta(uint8Data, res);\n                x += res[0];\n                parseDelta(uint8Data, res);\n                y += res[0];\n\n                t = x * multiplierU;\n                if (t < 0) t = 0; if (t > 65535) t = 65535;\n                internalUVs[i] = t;\n                t = y * multiplierV;\n                if (t < 0) t = 0; if (t > 65535) t = 65535;\n                internalUVs[i+1] = 65535 - t;\n            }\n        } else {\n            for (i = 0, li = numUVs * 2; i < li; i+=2) {\n                parseDelta(uint8Data, res);\n                x += res[0];\n                parseDelta(uint8Data, res);\n                y += res[0];\n\n                internalUVs[i] = x * multiplierU;\n                internalUVs[i+1] = 1 - (y * multiplierV);\n            }\n        }\n\n        index = res[1];\n    \n        tmpInternalUVs = internalUVs;\n    }\n\n    /*\n    struct FacesBlock {\n        ushort numFaces;              // number of faces\n\n        struct Face {                 // array of faces, size of array is defined by numFaces property\n\n            ushort v[3]; // array of indices to stored vertices\n            ushort t[3]; // if header.flags & ( 1 << 0 ): array of indices to stored internal texture coords\n\n        } faces[];\n    };\n    */\n\n    var numFaces = data.getUint16(index, true); index += 2;\n    var indices = null;\n\n    internalUVs = null;\n    externalUVs = null;\n\n    var onlyExternalIndices = (globals.config.mapIndexBuffers && globals.config.mapOnlyOneUVs && !(submesh.flags & flagsInternalTexcoords));\n    var onlyInternalIndices = (globals.config.mapIndexBuffers && globals.config.mapOnlyOneUVs && (submesh.flags & flagsInternalTexcoords));\n    var onlyIndices = onlyExternalIndices || onlyInternalIndices;\n\n    if (onlyIndices) {\n        indices = new Uint16Array(numFaces * 3);\n    } else {\n        vertices = use16bit ? (new Uint16Array(numFaces * 3 * 3)) : (new Float32Array(numFaces * 3 * 3));\n\n        if (submesh.flags & flagsInternalTexcoords) {\n            internalUVs = use16bit ? (new Uint16Array(numFaces * 3 * 2)) : (new Float32Array(numFaces * 3 * 2));\n        }\n\n        if (!onlyOneUVs && (submesh.flags & flagsExternalTexcoords)) {\n            externalUVs = use16bit ? (new Uint16Array(numFaces * 3 * 2)) : (new Float32Array(numFaces * 3 * 2));\n        }\n    }\n\n    var vtmp = tmpVertices;\n    var eUVs = tmpExternalUVs;\n    var iUVs = tmpInternalUVs;\n    var high = 0;\n    var v1, v2, v3, vv1, vv2, vv3;\n    res[1] = index;\n\n    for (i = 0; i < numFaces; i++) {\n        parseWord(uint8Data, res);\n        v1 = high - res[0];\n        if (!res[0]) { high++; }\n\n        parseWord(uint8Data, res);\n        v2 = high - res[0];\n        if (!res[0]) { high++; }\n\n        parseWord(uint8Data, res);\n        v3 = high - res[0];\n        if (!res[0]) { high++; }\n\n        if (onlyIndices) {\n            vindex = i * 3;\n            indices[vindex] = v1;\n            indices[vindex+1] = v2;\n            indices[vindex+2] = v3;\n        } else {\n            vindex = i * (3 * 3);\n            var sindex = v1 * 3;\n            vertices[vindex] = vtmp[sindex];\n            vertices[vindex+1] = vtmp[sindex+1];\n            vertices[vindex+2] = vtmp[sindex+2];\n\n            sindex = v2 * 3;\n            vertices[vindex+3] = vtmp[sindex];\n            vertices[vindex+4] = vtmp[sindex+1];\n            vertices[vindex+5] = vtmp[sindex+2];\n\n            sindex = v3 * 3;\n            vertices[vindex+6] = vtmp[sindex];\n            vertices[vindex+7] = vtmp[sindex+1];\n            vertices[vindex+8] = vtmp[sindex+2];\n\n            if (externalUVs != null) {\n                vindex = i * (3 * 2);\n                externalUVs[vindex] = eUVs[v1*2];\n                externalUVs[vindex+1] = eUVs[v1*2+1];\n                externalUVs[vindex+2] = eUVs[v2*2];\n                externalUVs[vindex+3] = eUVs[v2*2+1];\n                externalUVs[vindex+4] = eUVs[v3*2];\n                externalUVs[vindex+5] = eUVs[v3*2+1];\n            }\n        }\n    }\n\n    if (onlyExternalIndices) {\n        vertices = tmpVertices;\n        externalUVs = tmpExternalUVs;\n    }\n\n    if (onlyInternalIndices) {\n        vertices = use16bit ? (new Uint16Array((iUVs.length / 2) * 3)) : (new Float32Array((iUVs.length / 2) * 3));\n        internalUVs = tmpInternalUVs;\n    }\n\n    high = 0;\n\n    if (internalUVs != null) {\n        for (i = 0; i < numFaces; i++) {\n            parseWord(uint8Data, res);\n            v1 = high - res[0];\n            if (!res[0]) { high++; }\n    \n            parseWord(uint8Data, res);\n            v2 = high - res[0];\n            if (!res[0]) { high++; }\n    \n            parseWord(uint8Data, res);\n            v3 = high - res[0];\n            if (!res[0]) { high++; }\n\n            if (onlyInternalIndices) {\n                vindex = i * 3;\n\n                vv1 = indices[vindex] * 3;\n                vv2 = indices[vindex+1] * 3;\n                vv3 = indices[vindex+2] * 3;\n\n                vertices[v1*3] = vtmp[vv1];\n                vertices[v1*3+1] = vtmp[vv1+1];\n                vertices[v1*3+2] = vtmp[vv1+2];\n\n                vertices[v2*3] = vtmp[vv2];\n                vertices[v2*3+1] = vtmp[vv2+1];\n                vertices[v2*3+2] = vtmp[vv2+2];\n\n                vertices[v3*3] = vtmp[vv3];\n                vertices[v3*3+1] = vtmp[vv3+1];\n                vertices[v3*3+2] = vtmp[vv3+2];\n\n                indices[vindex] = v1;\n                indices[vindex+1] = v2;\n                indices[vindex+2] = v3;\n            } else {\n                vindex = i * (3 * 2);\n                internalUVs[vindex] = iUVs[v1*2];\n                internalUVs[vindex+1] = iUVs[v1*2+1];\n                internalUVs[vindex+2] = iUVs[v2*2];\n                internalUVs[vindex+3] = iUVs[v2*2+1];\n                internalUVs[vindex+4] = iUVs[v3*2];\n                internalUVs[vindex+5] = iUVs[v3*2+1];\n            }\n        }\n    }\n\n    index = res[1];\n\n    submesh.vertices = vertices;\n    submesh.internalUVs = internalUVs;\n    submesh.externalUVs = externalUVs;\n    submesh.indices = indices;\n\n    //tmpVertices = null;\n    //tmpInternalUVs = null;\n    //tmpExternalUVs = null;\n\n    stream.index = index;\n\n    submesh.size = submesh.vertices.byteLength;\n    if (submesh.internalUVs) submesh.size += submesh.internalUVs.byteLength;\n    if (submesh.externalUVs) submesh.size += submesh.externalUVs.byteLength;\n    if (submesh.indices) submesh.size += submesh.indices.byteLength;\n    submesh.faces = numFaces;\n};\n\nexport {parseMesh};\n\n","\n\nvar vec2 = {};\n\n\nvec2.create = function (a) {\n    var b = new Array(2);\n    if (a) {\n        b[0] = a[0];\n        b[1] = a[1];\n    }\n    return b;\n};\n\n\nvar vec4 = {};\n\n\nvec4.create = function (a) {\n    var b = new Array(4);\n    if (a) {\n        b[0] = a[0];\n        b[1] = a[1];\n        b[2] = a[2];\n        b[3] = a[3];\n    }\n    return b;\n};\n\n\nvec4.dot = function (a, b) {\n    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n};\n\n\nvec4.dot2 = function (a, b) {\n    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3];\n};\n\n\nvec4.dot3 = function (a, b, i, x, y, z) {\n    return a[0] * (b[i]-x) + a[1] * (b[i+1]-y) + a[2] * (b[i+2]-z) + a[3];\n};\n\n\nvar vec3 = {};\n\n\nvec3.create = function (a) {\n    var b = new Array(3);\n    if (a) {\n        b[0] = a[0];\n        b[1] = a[1];\n        b[2] = a[2];\n    }\n    return b;\n};\n\n\nvec3.set = function (a, b) {\n    b[0] = a[0];\n    b[1] = a[1];\n    b[2] = a[2];\n    return b;\n};\n\n\nvec3.add = function (a, b, c) {\n    if (!c || a == c) {\n        a[0] += b[0];\n        a[1] += b[1];\n        a[2] += b[2];\n        return a;\n    }\n    c[0] = a[0] + b[0];\n    c[1] = a[1] + b[1];\n    c[2] = a[2] + b[2];\n    return c;\n};\n\n\nvec3.subtract = function (a, b, c) {\n    if (!c || a == c) {\n        a[0] -= b[0];\n        a[1] -= b[1];\n        a[2] -= b[2];\n        return a;\n    }\n    c[0] = a[0] - b[0];\n    c[1] = a[1] - b[1];\n    c[2] = a[2] - b[2];\n    return c;\n};\n\n\nvec3.negate = function (a, b) {\n    b || (b = a);\n    b[0] = -a[0];\n    b[1] = -a[1];\n    b[2] = -a[2];\n    return b;\n};\n\n\nvec3.scale = function (a, b, c) {\n    if (!c || a == c) {\n        a[0] *= b;\n        a[1] *= b;\n        a[2] *= b;\n        return a;\n    }\n    c[0] = a[0] * b;\n    c[1] = a[1] * b;\n    c[2] = a[2] * b;\n    return c;\n};\n\n\nvec3.normalize = function (a, b) {\n    b || (b = a);\n    var c = a[0],\n        d = a[1],\n        e = a[2],\n        g = Math.sqrt(c * c + d * d + e * e);\n    if (g) {\n        if (g == 1) {\n            b[0] = c;\n            b[1] = d;\n            b[2] = e;\n            return b;\n        }\n    } else {\n        b[0] = 0;\n        b[1] = 0;\n        b[2] = 0;\n        return b;\n    }\n    g = 1 / g;\n    b[0] = c * g;\n    b[1] = d * g;\n    b[2] = e * g;\n    return b;\n};\n\n\nvec3.normalize2 = function (a, i, b) {\n    var c = a[i],\n        d = a[i+1],\n        e = a[i+2],\n        g = Math.sqrt(c * c + d * d + e * e);\n    if (g) {\n        if (g == 1) {\n            b[0] = c;\n            b[1] = d;\n            b[2] = e;\n            return b;\n        }\n    } else {\n        b[0] = 0;\n        b[1] = 0;\n        b[2] = 0;\n        return b;\n    }\n    g = 1 / g;\n    b[0] = c * g;\n    b[1] = d * g;\n    b[2] = e * g;\n};\n\n\nvec3.normalize3 = function (a, i, b, j) {\n    var c = a[i],\n        d = a[i+1],\n        e = a[i+2],\n        g = Math.sqrt(c * c + d * d + e * e);\n    if (g) {\n        if (g == 1) {\n            b[j] = c;\n            b[j+1] = d;\n            b[j+2] = e;\n            return b;\n        }\n    } else {\n        b[j] = 0;\n        b[j+1] = 0;\n        b[j+2] = 0;\n        return b;\n    }\n    g = 1 / g;\n    b[j] = c * g;\n    b[j+1] = d * g;\n    b[j+2] = e * g;\n};\n\n\nvec3.normalize4 = function (a, b) {\n    b || (b = a);\n    var c = a[0],\n        d = a[1],\n        e = a[2],\n        g = Math.sqrt(c * c + d * d + e * e);\n    if (g) {\n        if (g == 1) {\n            b[0] = c;\n            b[1] = d;\n            b[2] = e;\n            return b;\n        }\n    } else {\n        b[0] = 0;\n        b[1] = 0;\n        b[2] = 0;\n        return b;\n    }\n    var dd = g;\n    g = 1 / g;\n    b[0] = c * g;\n    b[1] = d * g;\n    b[2] = e * g;\n    return dd;\n};\n\n\nvec3.cross = function (a, b, c) {\n    c || (c = a);\n    var d = a[0],\n        e = a[1];\n    a = a[2];\n    var g = b[0],\n        f = b[1];\n    b = b[2];\n    c[0] = e * b - a * f;\n    c[1] = a * g - d * b;\n    c[2] = d * f - e * g;\n    return c;\n};\n\n\nvec3.length = function (a) {\n    var b = a[0],\n        c = a[1];\n    a = a[2];\n    return Math.sqrt(b * b + c * c + a * a);\n};\n\n\nvec3.dot = function (a, b) {\n    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n};\n\n\nvec3.dot2 = function (a, b, i) {\n    return a[0] * b[i] + a[1] * b[i+1] + a[2] * b[i+2];\n};\n\n\nvec3.dot3 = function (a, i, b, j) {\n    return a[i] * b[j] + a[i+1] * b[j+1] + a[i+2] * b[j+2];\n};\n\nvec3.distance = function (a, b) {\n    var dx = b[0] - a[0];\n    var dy = b[1] - a[1];\n    var dz = b[2] - a[2];\n    return Math.sqrt(dx*dx + dy*dy + dz*dz);\n};\n\nvec3.squareDistance = function (a, b) {\n    var dx = b[0] - a[0];\n    var dy = b[1] - a[1];\n    var dz = b[2] - a[2];\n    return dx*dx + dy*dy + dz*dz;\n};\n\n\nvec3.direction = function (a, b, c) {\n    c || (c = a);\n    var d = a[0] - b[0],\n        e = a[1] - b[1];\n    a = a[2] - b[2];\n    b = Math.sqrt(d * d + e * e + a * a);\n    if (!b) {\n        c[0] = 0;\n        c[1] = 0;\n        c[2] = 0;\n        return c;\n    }\n    b = 1 / b;\n    c[0] = d * b;\n    c[1] = e * b;\n    c[2] = a * b;\n    return c;\n};\n\n\nvec3.lerp = function (a, b, c, d) {\n    d || (d = a);\n    d[0] = a[0] + c * (b[0] - a[0]);\n    d[1] = a[1] + c * (b[1] - a[1]);\n    d[2] = a[2] + c * (b[2] - a[2]);\n    return d;\n};\n\n\nvec3.str = function (a) {\n    return '[' + a[0] + ', ' + a[1] + ', ' + a[2] + ']';\n};\n\n\nvar mat3 = {};\n\n\nmat3.create = function (a) {\n    var b = new Array(9);\n    if (a) {\n        b[0] = a[0];\n        b[1] = a[1];\n        b[2] = a[2];\n        b[3] = a[3];\n        b[4] = a[4];\n        b[5] = a[5];\n        b[6] = a[6];\n        b[7] = a[7];\n        b[8] = a[8];\n        b[9] = a[9];\n    }\n    return b;\n};\n\n\nmat3.set = function (a, b) {\n    b[0] = a[0];\n    b[1] = a[1];\n    b[2] = a[2];\n    b[3] = a[3];\n    b[4] = a[4];\n    b[5] = a[5];\n    b[6] = a[6];\n    b[7] = a[7];\n    b[8] = a[8];\n    return b;\n};\n\n\nmat3.identity = function (a) {\n    a[0] = 1;\n    a[1] = 0;\n    a[2] = 0;\n    a[3] = 0;\n    a[4] = 1;\n    a[5] = 0;\n    a[6] = 0;\n    a[7] = 0;\n    a[8] = 1;\n    return a;\n};\n\n\nmat3.transpose = function (a, b) {\n    if (!b || a == b) {\n        var c = a[1],\n            d = a[2],\n            e = a[5];\n        a[1] = a[3];\n        a[2] = a[6];\n        a[3] = c;\n        a[5] = a[7];\n        a[6] = d;\n        a[7] = e;\n        return a;\n    }\n    b[0] = a[0];\n    b[1] = a[3];\n    b[2] = a[6];\n    b[3] = a[1];\n    b[4] = a[4];\n    b[5] = a[7];\n    b[6] = a[2];\n    b[7] = a[5];\n    b[8] = a[8];\n    return b;\n};\n\n\nmat3.toMat4 = function (a, b) {\n    b || (b = mat4.create());\n    b[0] = a[0];\n    b[1] = a[1];\n    b[2] = a[2];\n    b[3] = 0;\n    b[4] = a[3];\n    b[5] = a[4];\n    b[6] = a[5];\n    b[7] = 0;\n    b[8] = a[6];\n    b[9] = a[7];\n    b[10] = a[8];\n    b[11] = 0;\n    b[12] = 0;\n    b[13] = 0;\n    b[14] = 0;\n    b[15] = 1;\n    return b;\n};\n\nmat3.multiplyVec3 = function (a, b, c) {\n    c || (c = b);\n    var d = b[0],\n        e = b[1];\n    b = b[2];\n    c[0] = a[0] * d + a[3] * e + a[6] * b;\n    c[1] = a[1] * d + a[4] * e + a[7] * b;\n    c[2] = a[2] * d + a[5] * e + a[8] * b;\n    return c;\n};\n\n\nmat3.str = function (a) {\n    return '[' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' + a[4] + ', ' + a[5] + ', ' + a[6] + ', ' + a[7] + ', ' + a[8] + ']';\n};\n\n\nvar mat4 = {};\n\n\nmat4.create = function (a) {\n    var b = new Array(16);\n    if (a) {\n        b[0] = a[0];\n        b[1] = a[1];\n        b[2] = a[2];\n        b[3] = a[3];\n        b[4] = a[4];\n        b[5] = a[5];\n        b[6] = a[6];\n        b[7] = a[7];\n        b[8] = a[8];\n        b[9] = a[9];\n        b[10] = a[10];\n        b[11] = a[11];\n        b[12] = a[12];\n        b[13] = a[13];\n        b[14] = a[14];\n        b[15] = a[15];\n    }\n    return b;\n};\n\n\nmat4.set = function (a, b) {\n    b[0] = a[0];\n    b[1] = a[1];\n    b[2] = a[2];\n    b[3] = a[3];\n    b[4] = a[4];\n    b[5] = a[5];\n    b[6] = a[6];\n    b[7] = a[7];\n    b[8] = a[8];\n    b[9] = a[9];\n    b[10] = a[10];\n    b[11] = a[11];\n    b[12] = a[12];\n    b[13] = a[13];\n    b[14] = a[14];\n    b[15] = a[15];\n    return b;\n};\n\n\nmat4.identity = function (a) {\n    a[0] = 1;\n    a[1] = 0;\n    a[2] = 0;\n    a[3] = 0;\n    a[4] = 0;\n    a[5] = 1;\n    a[6] = 0;\n    a[7] = 0;\n    a[8] = 0;\n    a[9] = 0;\n    a[10] = 1;\n    a[11] = 0;\n    a[12] = 0;\n    a[13] = 0;\n    a[14] = 0;\n    a[15] = 1;\n    return a;\n};\n\n\nmat4.transpose = function (a, b) {\n    if (!b || a == b) {\n        var c = a[1],\n            d = a[2],\n            e = a[3],\n            g = a[6],\n            f = a[7],\n            h = a[11];\n        a[1] = a[4];\n        a[2] = a[8];\n        a[3] = a[12];\n        a[4] = c;\n        a[6] = a[9];\n        a[7] = a[13];\n        a[8] = d;\n        a[9] = g;\n        a[11] = a[14];\n        a[12] = e;\n        a[13] = f;\n        a[14] = h;\n        return a;\n    }\n    b[0] = a[0];\n    b[1] = a[4];\n    b[2] = a[8];\n    b[3] = a[12];\n    b[4] = a[1];\n    b[5] = a[5];\n    b[6] = a[9];\n    b[7] = a[13];\n    b[8] = a[2];\n    b[9] = a[6];\n    b[10] = a[10];\n    b[11] = a[14];\n    b[12] = a[3];\n    b[13] = a[7];\n    b[14] = a[11];\n    b[15] = a[15];\n    return b;\n};\n\n\nmat4.determinant = function (a) {\n    var b = a[0],\n        c = a[1],\n        d = a[2],\n        e = a[3],\n        g = a[4],\n        f = a[5],\n        h = a[6],\n        i = a[7],\n        j = a[8],\n        k = a[9],\n        l = a[10],\n        o = a[11],\n        m = a[12],\n        n = a[13],\n        p = a[14];\n    a = a[15];\n    return m * k * h * e - j * n * h * e - m * f * l * e + g * n * l * e + j * f * p * e - g * k * p * e - m * k * d * i + j * n * d * i + m * c * l * i - b * n * l * i - j * c * p * i + b * k * p * i + m * f * d * o - g * n * d * o - m * c * h * o + b * n * h * o + g * c * p * o - b * f * p * o - j * f * d * a + g * k * d * a + j * c * h * a - b * k * h * a - g * c * l * a + b * f * l * a;\n};\n\n\nmat4.inverse = function (a, b) {\n    b || (b = a);\n    var c = a[0],\n        d = a[1],\n        e = a[2],\n        g = a[3],\n        f = a[4],\n        h = a[5],\n        i = a[6],\n        j = a[7],\n        k = a[8],\n        l = a[9],\n        o = a[10],\n        m = a[11],\n        n = a[12],\n        p = a[13],\n        r = a[14],\n        s = a[15],\n        A = c * h - d * f,\n        B = c * i - e * f,\n        t = c * j - g * f,\n        u = d * i - e * h,\n        v = d * j - g * h,\n        w = e * j - g * i,\n        x = k * p - l * n,\n        y = k * r - o * n,\n        z = k * s - m * n,\n        C = l * r - o * p,\n        D = l * s - m * p,\n        E = o * s - m * r,\n        q = 1 / (A * E - B * D + t * C + u * z - v * y + w * x);\n    b[0] = (h * E - i * D + j * C) * q;\n    b[1] = (-d * E + e * D - g * C) * q;\n    b[2] = (p * w - r * v + s * u) * q;\n    b[3] = (-l * w + o * v - m * u) * q;\n    b[4] = (-f * E + i * z - j * y) * q;\n    b[5] = (c * E - e * z + g * y) * q;\n    b[6] = (-n * w + r * t - s * B) * q;\n    b[7] = (k * w - o * t + m * B) * q;\n    b[8] = (f * D - h * z + j * x) * q;\n    b[9] = (-c * D + d * z - g * x) * q;\n    b[10] = (n * v - p * t + s * A) * q;\n    b[11] = (-k * v + l * t - m * A) * q;\n    b[12] = (-f * C + h * y - i * x) * q;\n    b[13] = (c * C - d * y + e * x) * q;\n    b[14] = (-n * u + p * B - r * A) * q;\n    b[15] = (k * u - l * B + o * A) * q;\n    return b;\n};\n\n\nmat4.toRotationMat = function (a, b) {\n    b || (b = mat4.create());\n    b[0] = a[0];\n    b[1] = a[1];\n    b[2] = a[2];\n    b[3] = a[3];\n    b[4] = a[4];\n    b[5] = a[5];\n    b[6] = a[6];\n    b[7] = a[7];\n    b[8] = a[8];\n    b[9] = a[9];\n    b[10] = a[10];\n    b[11] = a[11];\n    b[12] = 0;\n    b[13] = 0;\n    b[14] = 0;\n    b[15] = 1;\n    return b;\n};\n\n\nmat4.toMat3 = function (a, b) {\n    b || (b = mat3.create());\n    b[0] = a[0];\n    b[1] = a[1];\n    b[2] = a[2];\n    b[3] = a[4];\n    b[4] = a[5];\n    b[5] = a[6];\n    b[6] = a[8];\n    b[7] = a[9];\n    b[8] = a[10];\n    return b;\n};\n\n\nmat4.toInverseMat3 = function (a, b) {\n    var c = a[0],\n        d = a[1],\n        e = a[2],\n        g = a[4],\n        f = a[5],\n        h = a[6],\n        i = a[8],\n        j = a[9],\n        k = a[10],\n        l = k * f - h * j,\n        o = -k * g + h * i,\n        m = j * g - f * i,\n        n = c * l + d * o + e * m;\n    if (!n) return null;\n    n = 1 / n;\n    b || (b = mat3.create());\n    b[0] = l * n;\n    b[1] = (-k * d + e * j) * n;\n    b[2] = (h * d - e * f) * n;\n    b[3] = o * n;\n    b[4] = (k * c - e * i) * n;\n    b[5] = (-h * c + e * g) * n;\n    b[6] = m * n;\n    b[7] = (-j * c + d * i) * n;\n    b[8] = (f * c - d * g) * n;\n    return b;\n};\n\n\nmat4.multiply = function (a, b, c) {\n    c || (c = a);\n    var d = a[0],\n        e = a[1],\n        g = a[2],\n        f = a[3],\n        h = a[4],\n        i = a[5],\n        j = a[6],\n        k = a[7],\n        l = a[8],\n        o = a[9],\n        m = a[10],\n        n = a[11],\n        p = a[12],\n        r = a[13],\n        s = a[14];\n    a = a[15];\n    var A = b[0],\n        B = b[1],\n        t = b[2],\n        u = b[3],\n        v = b[4],\n        w = b[5],\n        x = b[6],\n        y = b[7],\n        z = b[8],\n        C = b[9],\n        D = b[10],\n        E = b[11],\n        q = b[12],\n        F = b[13],\n        G = b[14];\n    b = b[15];\n    c[0] = A * d + B * h + t * l + u * p;\n    c[1] = A * e + B * i + t * o + u * r;\n    c[2] = A * g + B * j + t * m + u * s;\n    c[3] = A * f + B * k + t * n + u * a;\n    c[4] = v * d + w * h + x * l + y * p;\n    c[5] = v * e + w * i + x * o + y * r;\n    c[6] = v * g + w * j + x * m + y * s;\n    c[7] = v * f + w * k + x * n + y * a;\n    c[8] = z * d + C * h + D * l + E * p;\n    c[9] = z * e + C * i + D * o + E * r;\n    c[10] = z *\n        g + C * j + D * m + E * s;\n    c[11] = z * f + C * k + D * n + E * a;\n    c[12] = q * d + F * h + G * l + b * p;\n    c[13] = q * e + F * i + G * o + b * r;\n    c[14] = q * g + F * j + G * m + b * s;\n    c[15] = q * f + F * k + G * n + b * a;\n    return c;\n};\n\n\nmat4.multiplyVec3 = function (a, b, c) {\n    c || (c = b);\n    var d = b[0],\n        e = b[1];\n    b = b[2];\n    c[0] = a[0] * d + a[4] * e + a[8] * b + a[12];\n    c[1] = a[1] * d + a[5] * e + a[9] * b + a[13];\n    c[2] = a[2] * d + a[6] * e + a[10] * b + a[14];\n    return c;\n};\n\n\nmat4.multiplyVec4 = function (a, b, c) {\n    c || (c = b);\n    var d = b[0],\n        e = b[1],\n        g = b[2];\n    b = b[3];\n    c[0] = a[0] * d + a[4] * e + a[8] * g + a[12] * b;\n    c[1] = a[1] * d + a[5] * e + a[9] * g + a[13] * b;\n    c[2] = a[2] * d + a[6] * e + a[10] * g + a[14] * b;\n    c[3] = a[3] * d + a[7] * e + a[11] * g + a[15] * b;\n    return c;\n};\n\n\nmat4.translate = function (a, b, c) {\n    var d = b[0],\n        e = b[1];\n    b = b[2];\n    if (!c || a == c) {\n        a[12] = a[0] * d + a[4] * e + a[8] * b + a[12];\n        a[13] = a[1] * d + a[5] * e + a[9] * b + a[13];\n        a[14] = a[2] * d + a[6] * e + a[10] * b + a[14];\n        a[15] = a[3] * d + a[7] * e + a[11] * b + a[15];\n        return a;\n    }\n    var g = a[0],\n        f = a[1],\n        h = a[2],\n        i = a[3],\n        j = a[4],\n        k = a[5],\n        l = a[6],\n        o = a[7],\n        m = a[8],\n        n = a[9],\n        p = a[10],\n        r = a[11];\n    c[0] = g;\n    c[1] = f;\n    c[2] = h;\n    c[3] = i;\n    c[4] = j;\n    c[5] = k;\n    c[6] = l;\n    c[7] = o;\n    c[8] = m;\n    c[9] = n;\n    c[10] = p;\n    c[11] = r;\n    c[12] = g * d + j * e + m * b + a[12];\n    c[13] = f * d + k * e + n * b + a[13];\n    c[14] = h * d + l * e + p * b + a[14];\n    c[15] = i * d + o * e + r * b + a[15];\n    return c;\n};\n\n\nmat4.scale = function (a, b, c) {\n    var d = b[0],\n        e = b[1];\n    b = b[2];\n    if (!c || a == c) {\n        a[0] *= d;\n        a[1] *= d;\n        a[2] *= d;\n        a[3] *= d;\n        a[4] *= e;\n        a[5] *= e;\n        a[6] *= e;\n        a[7] *= e;\n        a[8] *= b;\n        a[9] *= b;\n        a[10] *= b;\n        a[11] *= b;\n        return a;\n    }\n    c[0] = a[0] * d;\n    c[1] = a[1] * d;\n    c[2] = a[2] * d;\n    c[3] = a[3] * d;\n    c[4] = a[4] * e;\n    c[5] = a[5] * e;\n    c[6] = a[6] * e;\n    c[7] = a[7] * e;\n    c[8] = a[8] * b;\n    c[9] = a[9] * b;\n    c[10] = a[10] * b;\n    c[11] = a[11] * b;\n    c[12] = a[12];\n    c[13] = a[13];\n    c[14] = a[14];\n    c[15] = a[15];\n    return c;\n};\n\n\nmat4.rotate = function (a, b, c, d) {\n    var e = c[0],\n        g = c[1];\n    c = c[2];\n    var f = Math.sqrt(e * e + g * g + c * c);\n    if (!f) return null;\n    if (f != 1) {\n        f = 1 / f;\n        e *= f;\n        g *= f;\n        c *= f;\n    }\n    var h = Math.sin(b),\n        i = Math.cos(b),\n        j = 1 - i;\n    b = a[0];\n    f = a[1];\n    var k = a[2],\n        l = a[3],\n        o = a[4],\n        m = a[5],\n        n = a[6],\n        p = a[7],\n        r = a[8],\n        s = a[9],\n        A = a[10],\n        B = a[11],\n        t = e * e * j + i,\n        u = g * e * j + c * h,\n        v = c * e * j - g * h,\n        w = e * g * j - c * h,\n        x = g * g * j + i,\n        y = c * g * j + e * h,\n        z = e * c * j + g * h;\n    e = g * c * j - e * h;\n    g = c * c * j + i;\n    if (d) {\n        if (a != d) {\n            d[12] = a[12];\n            d[13] = a[13];\n            d[14] = a[14];\n            d[15] = a[15];\n        }\n    } else d = a;\n    d[0] = b * t + o * u + r * v;\n    d[1] = f * t + m * u + s * v;\n    d[2] = k * t + n * u + A * v;\n    d[3] = l * t + p * u + B *\n        v;\n    d[4] = b * w + o * x + r * y;\n    d[5] = f * w + m * x + s * y;\n    d[6] = k * w + n * x + A * y;\n    d[7] = l * w + p * x + B * y;\n    d[8] = b * z + o * e + r * g;\n    d[9] = f * z + m * e + s * g;\n    d[10] = k * z + n * e + A * g;\n    d[11] = l * z + p * e + B * g;\n    return d;\n};\n\n\nmat4.rotateX = function (a, b, c) {\n    var d = Math.sin(b);\n    b = Math.cos(b);\n    var e = a[4],\n        g = a[5],\n        f = a[6],\n        h = a[7],\n        i = a[8],\n        j = a[9],\n        k = a[10],\n        l = a[11];\n    if (c) {\n        if (a != c) {\n            c[0] = a[0];\n            c[1] = a[1];\n            c[2] = a[2];\n            c[3] = a[3];\n            c[12] = a[12];\n            c[13] = a[13];\n            c[14] = a[14];\n            c[15] = a[15];\n        }\n    } else c = a;\n    c[4] = e * b + i * d;\n    c[5] = g * b + j * d;\n    c[6] = f * b + k * d;\n    c[7] = h * b + l * d;\n    c[8] = e * -d + i * b;\n    c[9] = g * -d + j * b;\n    c[10] = f * -d + k * b;\n    c[11] = h * -d + l * b;\n    return c;\n};\n\n\nmat4.rotateY = function (a, b, c) {\n    var d = Math.sin(b);\n    b = Math.cos(b);\n    var e = a[0],\n        g = a[1],\n        f = a[2],\n        h = a[3],\n        i = a[8],\n        j = a[9],\n        k = a[10],\n        l = a[11];\n    if (c) {\n        if (a != c) {\n            c[4] = a[4];\n            c[5] = a[5];\n            c[6] = a[6];\n            c[7] = a[7];\n            c[12] = a[12];\n            c[13] = a[13];\n            c[14] = a[14];\n            c[15] = a[15];\n        }\n    } else c = a;\n    c[0] = e * b + i * -d;\n    c[1] = g * b + j * -d;\n    c[2] = f * b + k * -d;\n    c[3] = h * b + l * -d;\n    c[8] = e * d + i * b;\n    c[9] = g * d + j * b;\n    c[10] = f * d + k * b;\n    c[11] = h * d + l * b;\n    return c;\n};\n\n\nmat4.rotateZ = function (a, b, c) {\n    var d = Math.sin(b);\n    b = Math.cos(b);\n    var e = a[0],\n        g = a[1],\n        f = a[2],\n        h = a[3],\n        i = a[4],\n        j = a[5],\n        k = a[6],\n        l = a[7];\n    if (c) {\n        if (a != c) {\n            c[8] = a[8];\n            c[9] = a[9];\n            c[10] = a[10];\n            c[11] = a[11];\n            c[12] = a[12];\n            c[13] = a[13];\n            c[14] = a[14];\n            c[15] = a[15];\n        }\n    } else c = a;\n    c[0] = e * b + i * d;\n    c[1] = g * b + j * d;\n    c[2] = f * b + k * d;\n    c[3] = h * b + l * d;\n    c[4] = e * -d + i * b;\n    c[5] = g * -d + j * b;\n    c[6] = f * -d + k * b;\n    c[7] = h * -d + l * b;\n    return c;\n};\n\n\nmat4.frustum = function (a, b, c, d, e, g, f) {\n    f || (f = mat4.create());\n    var h = b - a,\n        i = d - c,\n        j = g - e;\n    f[0] = e * 2 / h;\n    f[1] = 0;\n    f[2] = 0;\n    f[3] = 0;\n    f[4] = 0;\n    f[5] = e * 2 / i;\n    f[6] = 0;\n    f[7] = 0;\n    f[8] = (b + a) / h;\n    f[9] = (d + c) / i;\n    f[10] = -(g + e) / j;\n    f[11] = -1;\n    f[12] = 0;\n    f[13] = 0;\n    f[14] = -(g * e * 2) / j;\n    f[15] = 0;\n    return f;\n};\n\n\nmat4.perspective = function (a, b, c, d, e) {\n    a = c * Math.tan(a * Math.PI / 360);\n    b = a * b;\n    return mat4.frustum(-b, b, -a, a, c, d, e);\n};\n\n\nmat4.ortho = function (a, b, c, d, e, g, f) {\n    f || (f = mat4.create());\n    var h = b - a,\n        i = d - c,\n        j = g - e;\n    f[0] = 2 / h;\n    f[1] = 0;\n    f[2] = 0;\n    f[3] = 0;\n    f[4] = 0;\n    f[5] = 2 / i;\n    f[6] = 0;\n    f[7] = 0;\n    f[8] = 0;\n    f[9] = 0;\n    f[10] = -2 / j;\n    f[11] = 0;\n    f[12] = -(a + b) / h;\n    f[13] = -(d + c) / i;\n    f[14] = -(g + e) / j;\n    f[15] = 1;\n    return f;\n};\n\n\nmat4.lookAt = function (a, b, c, d) {\n    d || (d = mat4.create());\n    var e = a[0],\n        g = a[1];\n    a = a[2];\n    var f = c[0],\n        h = c[1],\n        i = c[2];\n    c = b[1];\n    var j = b[2];\n    if (e == b[0] && g == c && a == j) return mat4.identity(d);\n    var k, l, o, m;\n    c = e - b[0];\n    j = g - b[1];\n    b = a - b[2];\n    m = 1 / Math.sqrt(c * c + j * j + b * b);\n    c *= m;\n    j *= m;\n    b *= m;\n    k = h * b - i * j;\n    i = i * c - f * b;\n    f = f * j - h * c;\n    m = Math.sqrt(k * k + i * i + f * f);\n    if (m) {\n        m = 1 / m;\n        k *= m;\n        i *= m;\n        f *= m;\n    } else f = i = k = 0;\n    h = j * f - b * i;\n    l = b * k - c * f;\n    o = c * i - j * k;\n    m = Math.sqrt(h * h + l * l + o * o);\n    if (m) {\n        m = 1 / m;\n        h *= m;\n        l *= m;\n        o *= m;\n    } else o = l = h = 0;\n    d[0] = k;\n    d[1] = h;\n    d[2] = c;\n    d[3] = 0;\n    d[4] = i;\n    d[5] = l;\n    d[6] = j;\n    d[7] = 0;\n    d[8] = f;\n    d[9] =\n        o;\n    d[10] = b;\n    d[11] = 0;\n    d[12] = -(k * e + i * g + f * a);\n    d[13] = -(h * e + l * g + o * a);\n    d[14] = -(c * e + j * g + b * a);\n    d[15] = 1;\n    return d;\n};\n\n\nmat4.str = function (a) {\n    return '[' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' + a[4] + ', ' + a[5] + ', ' + a[6] + ', ' + a[7] + ', ' + a[8] + ', ' + a[9] + ', ' + a[10] + ', ' + a[11] + ', ' + a[12] + ', ' + a[13] + ', ' + a[14] + ', ' + a[15] + ']';\n};\n\n\nvar quat4 = {};\n\n\nquat4.create = function (a) {\n    var b = new Array(4);\n    if (a) {\n        b[0] = a[0];\n        b[1] = a[1];\n        b[2] = a[2];\n        b[3] = a[3];\n    }\n    return b;\n};\n\n\nquat4.set = function (a, b) {\n    b[0] = a[0];\n    b[1] = a[1];\n    b[2] = a[2];\n    b[3] = a[3];\n    return b;\n};\n\n\nquat4.calculateW = function (a, b) {\n    var c = a[0],\n        d = a[1],\n        e = a[2];\n    if (!b || a == b) {\n        a[3] = -Math.sqrt(Math.abs(1 - c * c - d * d - e * e));\n        return a;\n    }\n    b[0] = c;\n    b[1] = d;\n    b[2] = e;\n    b[3] = -Math.sqrt(Math.abs(1 - c * c - d * d - e * e));\n    return b;\n};\n\n\nquat4.inverse = function (a, b) {\n    if (!b || a == b) {\n        a[0] *= 1;\n        a[1] *= 1;\n        a[2] *= 1;\n        return a;\n    }\n    b[0] = -a[0];\n    b[1] = -a[1];\n    b[2] = -a[2];\n    b[3] = a[3];\n    return b;\n};\n\n\nquat4.length = function (a) {\n    var b = a[0],\n        c = a[1],\n        d = a[2];\n    a = a[3];\n    return Math.sqrt(b * b + c * c + d * d + a * a);\n};\n\n\nquat4.normalize = function (a, b) {\n    b || (b = a);\n    var c = a[0],\n        d = a[1],\n        e = a[2],\n        g = a[3],\n        f = Math.sqrt(c * c + d * d + e * e + g * g);\n    if (f == 0) {\n        b[0] = 0;\n        b[1] = 0;\n        b[2] = 0;\n        b[3] = 0;\n        return b;\n    }\n    f = 1 / f;\n    b[0] = c * f;\n    b[1] = d * f;\n    b[2] = e * f;\n    b[3] = g * f;\n    return b;\n};\n\n\nquat4.multiply = function (a, b, c) {\n    c || (c = a);\n    var d = a[0],\n        e = a[1],\n        g = a[2];\n    a = a[3];\n    var f = b[0],\n        h = b[1],\n        i = b[2];\n    b = b[3];\n    c[0] = d * b + a * f + e * i - g * h;\n    c[1] = e * b + a * h + g * f - d * i;\n    c[2] = g * b + a * i + d * h - e * f;\n    c[3] = a * b - d * f - e * h - g * i;\n    return c;\n};\n\n\nquat4.multiplyVec3 = function (a, b, c) {\n    c || (c = b);\n    var d = b[0],\n        e = b[1],\n        g = b[2];\n    b = a[0];\n    var f = a[1],\n        h = a[2];\n    a = a[3];\n    var i = a * d + f * g - h * e,\n        j = a * e + h * d - b * g,\n        k = a * g + b * e - f * d;\n    d = -b * d - f * e - h * g;\n    c[0] = i * a + d * -b + j * -h - k * -f;\n    c[1] = j * a + d * -f + k * -b - i * -h;\n    c[2] = k * a + d * -h + i * -f - j * -b;\n    return c;\n};\n\n\nquat4.toMat3 = function (a, b) {\n    b || (b = mat3.create());\n    var c = a[0],\n        d = a[1],\n        e = a[2],\n        g = a[3],\n        f = c + c,\n        h = d + d,\n        i = e + e,\n        j = c * f,\n        k = c * h;\n    c = c * i;\n    var l = d * h;\n    d = d * i;\n    e = e * i;\n    f = g * f;\n    h = g * h;\n    g = g * i;\n    b[0] = 1 - (l + e);\n    b[1] = k - g;\n    b[2] = c + h;\n    b[3] = k + g;\n    b[4] = 1 - (j + e);\n    b[5] = d - f;\n    b[6] = c - h;\n    b[7] = d + f;\n    b[8] = 1 - (j + l);\n    return b;\n};\n\n\nquat4.toMat4 = function (a, b) {\n    b || (b = mat4.create());\n    var c = a[0],\n        d = a[1],\n        e = a[2],\n        g = a[3],\n        f = c + c,\n        h = d + d,\n        i = e + e,\n        j = c * f,\n        k = c * h;\n    c = c * i;\n    var l = d * h;\n    d = d * i;\n    e = e * i;\n    f = g * f;\n    h = g * h;\n    g = g * i;\n    b[0] = 1 - (l + e);\n    b[1] = k - g;\n    b[2] = c + h;\n    b[3] = 0;\n    b[4] = k + g;\n    b[5] = 1 - (j + e);\n    b[6] = d - f;\n    b[7] = 0;\n    b[8] = c - h;\n    b[9] = d + f;\n    b[10] = 1 - (j + l);\n    b[11] = 0;\n    b[12] = 0;\n    b[13] = 0;\n    b[14] = 0;\n    b[15] = 1;\n    return b;\n};\n\n\nquat4.slerp = function (a, b, c, d) {\n    d || (d = a);\n    var e = c;\n    if (a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3] < 0) e = -1 * c;\n    d[0] = 1 - c * a[0] + e * b[0];\n    d[1] = 1 - c * a[1] + e * b[1];\n    d[2] = 1 - c * a[2] + e * b[2];\n    d[3] = 1 - c * a[3] + e * b[3];\n    return d;\n};\n\n\nquat4.str = function (a) {\n    return '[' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ']';\n};\n\nexport {vec2, vec3, vec4, mat3, mat4};\n\n","\nimport {mat4 as mat4_} from './matrix';\n\n//get rid of compiler mess\nvar mat4 = mat4_;\n\n\nvar math = {};\n\n\nmath.isEqual = function(value, value2, delta) {\n    return (Math.abs(value - value2) < delta);\n};\n\n\nmath.clamp = function(value, min, max) {\n    if (value < min) value = min;\n    else if (value > max) value = max;\n\n    return value;\n};\n\n\nmath.radians = function(degrees) {\n    return degrees * Math.PI / 180;\n};\n\n\nmath.degrees = function(radians) {\n    return (radians / Math.PI) * 180;\n};\n\n\nmath.mix = function(a, b, c) {\n    return a + (b - a) * c;\n};\n\n\nmath.frustumMatrix = function(left, right, bottom, top, near, far) {\n    var w = (right - left);\n    var h = (top - bottom);\n    var d = (far - near);\n\n    var m = mat4.create([2*near/w, 0, (right+left)/w, 0,\n        0, 2*near/h, (top+bottom)/h, 0,\n        0, 0, -(far+near)/d, -2*far*near/d,\n        0, 0, -1, 0]);\n\n    mat4.transpose(m);\n    return m;\n};\n\n\nmath.perspectiveMatrix = function(fovy, aspect, near, far) {\n    var ymax = near * Math.tan(fovy * Math.PI / 180.0);\n    var xmax = ymax * aspect;\n    return math.frustumMatrix(-xmax, xmax, -ymax, ymax, near, far);\n};\n\n\nmath.orthographicMatrix = function(vsize, aspect, near, far) {\n    //vsize *= 0.020;\n    var w = vsize* 0.5 * aspect;\n    var h = vsize * 0.5;\n    var d = (far - near);\n\n    var m = mat4.create([1/w, 0, 0, 0,\n        0, 1/h, 0, 0,\n        0, 0, -2/d, -((far+near)/d),\n        0, 0, 0, 1]);\n\n    mat4.transpose(m);\n    return m;\n};\n\n\nmath.rotationMatrix = function(axis, angle) {\n    var ca = Math.cos(angle), sa = Math.sin(angle);\n\n    /*    var m;\n    switch (axis) {\n    case 0:\n        m = [\n            1,  0,  0, 0,\n            0, ca,-sa, 0,\n            0, sa, ca, 0,\n            0,  0,  0, 1 ];\n        break;\n    case 1:\n        m = [\n            ca, 0,-sa, 0,\n            0, 1,  0,  0,\n            sa, 0, ca, 0,\n            0, 0,  0, 1 ];\n        break;\n    default:\n        m = [\n            ca,-sa, 0, 0,\n            sa, ca, 0, 0,\n            0,  0,  1, 0,\n            0,  0,  0, 1 ];\n        break;\n    }\n    mat4.transpose(m);\n    return m; */\n\n    switch (axis) {\n    case 0:\n        return [\n            1,   0,   0,  0,\n            0,  ca,  sa,  0,\n            0, -sa,  ca,  0,\n            0,   0,   0,  1 ];\n    case 1:\n        return [\n             ca,  0,  sa,  0,\n              0,  1,   0,  0,\n            -sa,  0,  ca,  0,\n              0,  0,   0,  1 ];\n    default:\n        return [\n             ca, sa,  0,  0,\n            -sa, ca,  0,  0,\n              0,  0,  1,  0,\n              0,  0,  0,  1 ];\n    }\n\n};\n\n\nmath.scaleMatrix = function(sx, sy, sz) {\n    /*var m = [\n        sx,  0,  0, 0,\n        0, sy,  0, 0,\n        0,  0, sz, 0,\n        0,  0,  0, 1 ];\n\n    mat4.transpose(m);\n    return m;*/\n    return [\n        sx,   0,   0,   0,\n        0,   sy,   0,   0,\n        0,    0,  sz,   0,\n        0,    0,   0,   1 ];\n};\n\n\nmath.scaleMatrixf = function(s) {\n    return math.scaleMatrix(s, s, s);\n};\n\n\nmath.translationMatrix = function(tx, ty, tz) {\n    /*\n    var m = [\n        1, 0, 0, tx,\n        0, 1, 0, ty,\n        0, 0, 1, tz,\n        0, 0, 0, 1 ];\n\n    mat4.transpose(m);\n    */\n\n    return [\n        1,   0,  0,  0,\n        0,   1,  0,  0,\n        0,   0,  1,  0,\n        tx, ty, tz,  1 ];\n};\n\n\nmath.translationMatrix2f = function(t) {\n    return math.translationMatrix(t[0], t[1], 0);\n};\n\n\nmath.translationMatrix3f = function(t) {\n    return math.translationMatrix(t[0], t[1], t[2]);\n};\n\n\nexport {math};\n","\nvar utilsUrl = {};\n\n\nutilsUrl.isSameOrigin = function(url) {\n    if (typeof url !== 'string') {\n        return false;\n    }\n    var docHost = document.location.hostname;\n    var parser = utilsUrl.parse(url);\n    return parser['hostname'] === docHost;\n};\n\n\nutilsUrl.parse = function(url) {\n    if (typeof url !== 'string') {\n        return null;\n    }\n\n    var parser = document.createElement('a');\n    parser['href'] = url;\n    return parser;\n};\n\n\nutilsUrl.getParamsFromUrl = function(url) {\n    var parser = utilsUrl.parse(url);\n    var queryString = {};\n    var query = parser['search'].substring(1);\n    var vars = query.split('&');\n    if (!(vars.length == 1 && vars[0] == '')) {\n        for (var i=0; i < vars.length; i++) {\n            var pair = vars[i].split('=');\n            if (typeof queryString[pair[0]] === 'undefined') {\n                queryString[pair[0]] = pair[1];\n            } else if (typeof queryString[pair[0]] === 'string') {\n                var arr = [ queryString[pair[0]], pair[1] ];\n                queryString[pair[0]] = arr;\n            } else {\n                queryString[pair[0]].push(pair[1]);\n            }\n        }\n    }\n    return queryString;\n};\n\n\nutilsUrl.getHost = function(url) {\n    var location = document.createElement('a');\n    location.href = url;\n    return location.hostname; \n};\n\n\nutilsUrl.getSchema = function(url) {\n    //if (window.location.href.indexOf(\"file://\") != -1) {\n    if (url.indexOf('http://') != -1) {\n        return 'http:';\n    } else if (url.indexOf('https://') != -1) {\n        return 'https:';\n    } else {\n        var location = document.createElement('a');\n        location.href = url;\n        return location.protocol;\n    }\n};\n\n\nutilsUrl.getOrigin = function(url) {\n    var location = document.createElement('a');\n    location.href = url;\n\n    if (!location.origin) {  //IE11 hack\n      return location.protocol + \"//\" + location.hostname + (location.port ? ':' + location.port: '');\n    }\n\n    return location.origin; \n};\n\n\nutilsUrl.getBase = function(url) {\n    return url.split('?')[0].split('/').slice(0, -1).join('/')+'/';\n};\n\n\nutilsUrl.makeAbsolute = function(href) {\n    var link = document.createElement(\"a\");\n    link.href = href;\n    return link.href;\n};\n\nutilsUrl.getProcessUrl = function(url, originUrl) {\n    if (!url || !originUrl) {\n        return url;\n    }\n\n    url = url.trim();\n    originUrl= originUrl.trim();\n    var baseUrl = utilsUrl.getBase(originUrl);\n    var baseUrlSchema = utilsUrl.getSchema(originUrl);\n    var baseUrlOrigin = utilsUrl.getOrigin(originUrl); \n   \n    if (url.indexOf('://') != -1) { //absolute\n        return url;\n    } else if (url.indexOf('//') == 0) {  //absolute without schema\n        return baseUrlSchema + url;\n    } else if (url.indexOf('/') == 0) {  //absolute without host\n        return baseUrlOrigin + url;\n    } else {  //relative\n        return baseUrl + url; \n    }\n};\n\n\nexport {utilsUrl};\n","\nimport {math as math_} from './math';\nimport {utilsUrl as utilsUrl_} from './url';\n\n//get rid of compiler mess\nvar math = math_;\nvar utilsUrl = utilsUrl_;\n\n\nvar utils = {};\nutils.useCredentials = false;\nutils.instanceCounter = 0;\n\n\nutils.validateBool = function(value, defaultValue) {\n    if (typeof value === 'boolean') {\n        return value;\n    } else {\n        return defaultValue;\n    }\n};\n\n\nutils.validateNumber = function(value, minValue, maxValue, defaultValue) {\n    if (typeof value === 'number') {\n        return math.clamp(value, minValue, maxValue);\n    } else {\n        return defaultValue;\n    }\n};\n\n\nutils.validateNumberArray = function(array, arraySize, minValues, maxValues, defaultValues) {\n    if (Array.isArray(array) && array.length == arraySize) {\n        for (var i = 0; i < arraySize; i++) {\n            array[i] = math.clamp(array[i], minValues[i], maxValues[i]);\n        }\n        return array;\n    } else {\n        return defaultValues;\n    }\n};\n\n\nutils.validateString = function(value, defaultValue) {\n    if (typeof value === 'string') {\n        return value;\n    } else {\n        return defaultValue;\n    }\n};\n\n\nutils.padNumber = function(n, width) {\n    var z = '0';\n\n    if (n < 0) {\n        n = (-n) + '';\n        width--;     //7\n        return n.length >= width ? ('-' + n) : '-' + (new Array(width - n.length + 1).join(z) + n);\n    } else {\n        n = n + '';\n        return n.length >= width ? n : new Array(width - n.length + 1).join(z) + n;\n    }\n};\n\n\nutils.decodeFloat16 = function(binary) {\n    var exponent = (binary & 0x7C00) >> 10;\n    var fraction = binary & 0x03FF;\n    return (binary >> 15 ? -1 : 1) * (\n        exponent ?\n        (\n            exponent === 0x1F ?\n            fraction ? NaN : Infinity :\n            Math.pow(2, exponent - 15) * (1 + fraction / 0x400)\n        ) :\n        6.103515625e-5 * (fraction / 0x400)\n    );\n};\n\n\nutils.simpleFmtObj = (function obj(str, obj) {\n    if (!str || str == '') {\n        return '';\n    }\n\n    return str.replace(/\\{([$a-zA-Z0-9][$a-zA-Z0-9]*)\\}/g, function(s, match) {\n        return (match in obj ? obj[match] : s);\n    });\n});\n\n\nutils.simpleWikiLinks = (function obj(str, plain) {\n    if (!str || str == '') {\n        return '';\n    }\n\n    var str2 = utils.simpleFmtObj(str, {'copy':'&copy;', 'Y': (new Date().getFullYear())}); \n    \n    return str2.replace(/\\[([^\\]]*)\\]/g, function(s, match) {\n        match  = match.trim();\n        var urls = match.split(' ');//, 1);\n        \n        if (urls[0].indexOf('//') != -1) {\n            if (plain) {\n                if (urls.length > 1) {\n                    return '' + match.substring(urls[0].length);\n                } else {\n                    return '' + urls[0];\n                }\n            } else {\n                if (urls.length > 1) {\n                    return '<a href=' + urls[0] + ' target=\"blank\">' + match.substring(urls[0].length)+'</a>';\n                } else {\n                    return '<a href=' + urls[0] + ' target=\"blank\">' + urls[0]+'</a>';\n                }\n            }\n        }\n        \n        return match;\n    });\n});\n\n\nutils.simpleFmtObjOrCall = (function obj(str, obj, call) {\n    if (!str || str == '') {\n        return '';\n    }\n\n    return str.replace(/\\{([$a-zA-Z(-9][$a-zA-Z(-9]*)\\}/g, function(s, match) {\n        return (match in obj ? obj[match] : call(match));\n    });\n});\n\n\nutils.getABGRFromHexaCode = (function(code) {\n    var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(code);\n\n    return result ?\n    [ parseInt(result[4], 16),\n        parseInt(result[3], 16),\n        parseInt(result[2], 16),\n        parseInt(result[1], 16)]\n    : [0,0,0,255];\n});\n\n\nutils.stringifyFunction = (function(fn) {\n    // Stringify the code\n    return '(' + fn + ').call(self);';\n});\n\n\nutils.isPowerOfTwo = (function(value) {\n    return (value & (value - 1)) === 0 && value !== 0;\n});\n\n\nutils.nearestPowerOfTwo = (function(value) {\n    return Math.pow(2, Math.round(Math.log(value) / Math.LN2));\n});   \n\n\nutils.fitToPowerOfTwo = (function(value) {\n    return Math.pow(2, Math.ceil(Math.log(value) / Math.LN2));\n});   \n\n\nutils.getHash = function(str) {\n    if (!str || str.length === 0) {\n        return 0;    \n    }\n\n    var hash = 0, c;\n    for (var i = 0, li = str.length; i < li; i++) {\n        c   = str.charCodeAt(i);\n        hash  = ((hash << 5) - hash) + c;\n        hash |= 0; // Convert to 32bit integer\n    }\n\n    return hash;\n};\n\n\nutils.convertRGB2YCbCr = function(r, g, b) {\n  return [( .299 * r + .587 * g  +  0.114 * b) + 0,\n          ( -.169 * r + -.331 * g +  0.500 * b) + 128,\n          ( .500 * r + -.419 * g +  -0.081 * b) + 128];\n};\n\n\nutils.convertYCbCr2RGB = function(y, cb, cr) {\n  return [1 * y +  0 * (cb-128)      +  1.4 * (cr-128),\n          1 * y +  -.343 * (cb-128)  +  -.711 * (cr-128),\n          1 * y +  1.765 * (cb-128)  +  0 * (cr-128)];\n};\n\n\nutils.convertHSL2RGB = function(h, s, l){\n   var r, g, b, m, c, x;\n\n    h /= 60;\n    if (h < 0) h = 6 - (-h % 6);\n    h %= 6;\n\n    s = Math.max(0, Math.min(1, s / 100));\n    l = Math.max(0, Math.min(1, l / 100));\n\n    c = (1 - Math.abs((2 * l) - 1)) * s;\n    x = c * (1 - Math.abs((h % 2) - 1));\n\n    if (h < 1) {\n        r = c, g = x, b = 0;\n    } else if (h < 2) {\n        r = x, g = c, b = 0;\n    } else if (h < 3) {\n        r = 0, g = c, b = x;\n    } else if (h < 4) {\n        r = 0, g = x, b = c;\n    } else if (h < 5) {\n        r = x, g = 0, b = c;\n    } else {\n        r = c, g = 0, b = x;\n    }\n\n    m = l - c / 2\n    \n    return [(r + m),\n            (g + m),\n            (b + m)];\n}\n\n\nutils.getHashColor = function(str) {\n    var h = utils.getHash(str);\n    var c = utils.convertRGB2YCbCr(h&255,(h>>8)&255,(h>>16)&255);\n    c[0] = math.clamp(c[0], 50, 200);\n    return utils.convertRGB2YCbCr(c[0],c[1],c[2]);\n};\n\n\nutils.getHashColor2 = function(counter) {\n    var h = Math.floor(counter / 18);\n    var l = 50;\n\n    if (h >= 1) {\n        if (h % 2) {\n            l = 50 + ((l * 10) % 30);\n        } else {\n            l = 50 - (((l-1) * 10) % 30);\n        }\n     }\n\n    h = (counter % 18) * 20;\n\n    return utils.convertHSL2RGB(h,100,l);\n};\n\n\nutils.loadText = function(path, onLoaded, onError, withCredentials, xhrParams) {\n    utils.loadJSON(path, onLoaded, onError, true, withCredentials, xhrParams);\n};\n\n\nutils.loadXML = function(path, onLoaded, onError, withCredentials, xhrParams) {\n    var onLoaded2 = (function(data){\n        var parser = new DOMParser();\n        data = parser.parseFromString(data, 'text/xml');\n        if (onLoaded) {\n            onLoaded(data);\n        }\n    });\n\n    utils.loadJSON(path, onLoaded2, onError, true, withCredentials, xhrParams);\n};\n\n\nutils.loadJSON = function(path, onLoaded, onError, skipParse, withCredentials, xhrParams) {\n    var xhr = new XMLHttpRequest();\n\n    //xhr.onload  = (function() {\n    xhr.onreadystatechange = (function (){\n\n        switch (xhr.readyState) {\n        case 0 : // UNINITIALIZED\n        case 1 : // LOADING\n        case 2 : // LOADED\n        case 3 : // INTERACTIVE\n            break;\n        case 4 : // COMPLETED\n    \n            if (xhr.status >= 400 || xhr.status == 0) {\n                if (onError) {\n                    onError(xhr.status);\n                }\n                break;\n            }\n    \n            var data = xhr.response;\n            var parsedData = data;\n                \n            if (!skipParse) {\n                try {\n                        //var parsedData = skipParse ? data : eval(\"(\"+data+\")\");\n                    parsedData = JSON.parse(data);\n                } catch(e) {\n                    // eslint-disable-next-line\n                    console.log('JSON Parse Error ('+path+'): ' + (e['message'] ? e['message'] : ''));\n                        \n                    if (onError ) {\n                        onError(xhr.status);\n                    }\n                \n                    return;\n                }\n            }\n                \n            if (onLoaded) {\n                onLoaded(parsedData);\n            }\n    \n            break;\n        }\n\n    }).bind(this);\n\n    /*\n    xhr.onerror  = (function() {\n        if (onError) {\n            onError();\n        }\n    }).bind(this);*/\n\n    xhr.open('GET',  path, true);\n    xhr.withCredentials = withCredentials;\n    \n    if (xhrParams && xhrParams['token'] /*&& xhrParams[\"tokenHeader\"]*/) {\n        //xhr.setRequestHeader(xhrParams[\"tokenHeader\"], xhrParams[\"token\"]); //old way\n        xhr.setRequestHeader('Accept', 'token/' + xhrParams['token'] + ', */*');\n    }\n\n    if (xhrParams && xhrParams['charset']) {\n        xhr.overrideMimeType('text/xml; charset=' + xhrParams['charset']);\n        //xhr.setRequestHeader('Content-type', xhrParams['Content-type']);\n    }\n    \n    xhr.send('');\n};\n\n\nutils.loadBinary = function(path, onLoaded, onError, withCredentials, xhrParams, responseType) {\n    var xhr = new XMLHttpRequest();\n\n    xhr.onreadystatechange = (function (){\n\n        switch (xhr.readyState) {\n        case 0 : // UNINITIALIZED\n        case 1 : // LOADING\n        case 2 : // LOADED\n        case 3 : // INTERACTIVE\n            break;\n        case 4 : // COMPLETED\n    \n            if (xhr.status >= 400 || xhr.status == 0) {\n                if (onError) {\n                    onError(xhr.status);\n                }\n                break;\n            }\n    \n            var abuffer = xhr.response;\n                    \n            if (!abuffer) {\n                if (onError) {\n                    onError();\n                }\n                break;\n            }\n                    \n                    //if (!responseType || responseType == \"arraybuffer\") {\n                        //var data = new DataView(abuffer);\n                    //} else {\n                      //  var data = abuffer;\n                    //}\n    \n            if (onLoaded) {\n                onLoaded(abuffer);\n            }\n    \n            break;\n    \n        default:\n    \n            if (onError) {\n                onError();\n            }\n    \n            break;\n        }\n\n    }).bind(this);\n    \n    /*\n    xhr.onerror  = (function() {\n        if (onError) {\n            onError();\n        }\n    }).bind(this);*/\n\n    xhr.open('GET', path, true);\n    xhr.responseType = responseType ? responseType : 'arraybuffer';\n    xhr.withCredentials = withCredentials;\n\n    if (xhrParams && xhrParams['token'] /*&& xhrParams[\"tokenHeader\"]*/) {\n        //xhr.setRequestHeader(xhrParams[\"tokenHeader\"], xhrParams[\"token\"]); //old way\n        xhr.setRequestHeader('Accept', 'token/' + xhrParams['token'] + ', */*');\n    }\n\n    xhr.send('');\n};\n\n\nutils.headRequest = function(url, onLoaded, onError, withCredentials, xhrParams) { \n    var xhr = new XMLHttpRequest();\n\n    xhr.onreadystatechange = (function (){\n\n        switch (xhr.readyState) {\n        case 0 : // UNINITIALIZED\n        case 1 : // LOADING\n        case 2 : // LOADED\n        case 3 : // INTERACTIVE\n            break;\n        case 4 : // COMPLETED\n            if (onLoaded != null) {\n                onLoaded(xhr.getAllResponseHeaders(), xhr.status);\n                    //onLoaded(xhr.getResponseHeader(\"X-VE-Tile-Info\"), xhr.status);\n            }\n            break;\n    \n        default:\n    \n            if (onError != null) {\n                onError();\n            }\n    \n            break;\n        }\n\n    }).bind(this);\n\n    xhr.onerror  = (function() {\n        if (onError != null) {\n            onError();\n        }\n    }).bind(this);\n\n    xhr.open('HEAD', url, true);\n    //xhr.responseType = responseType ? responseType : \"arraybuffer\";\n    xhr.withCredentials = withCredentials;\n\n    if (xhrParams && xhrParams['token'] /*&& xhrParams[\"tokenHeader\"]*/) {\n        //xhr.setRequestHeader(xhrParams[\"tokenHeader\"], xhrParams[\"token\"]); //old way\n        xhr.setRequestHeader('Accept', 'token/' + xhrParams['token'] + ', */*');\n    }\n\n    xhr.send('');\n};\n\n\nutils.loadImage = function(url, onload, onerror, withCredentials, direct) {\n    var image = new Image();\n    image.onerror = onerror;\n    image.onload = onload;\n\n    if (!direct){\n        image.crossOrigin = withCredentials ? 'use-credentials' : 'anonymous';\n    }\n\n    image.src = url;\n    return image;\n};\n\n\nutils.getParamsFromUrl = function(url) {\n    return utilsUrl.getParamsFromUrl(url);\n};\n\n\n//var textDecoderUtf8 = null; //(typeof TextDecoder !== 'undefined') ? (new TextDecoder('utf-8')) : null;\nvar textDecoderUtf8 = (typeof TextDecoder !== 'undefined') ? (new TextDecoder('utf-8')) : null;\n\nutils.unint8ArrayToString = function(array) {\n    if (textDecoderUtf8) {\n        return textDecoderUtf8.decode(array);\n    } else {\n//        return String.fromCharCode.apply(null, new Uint8Array(array.buffer));\n\n        /*\n        var buff = new Uint16Array(array.buffer, array.byteOffset, array.byteLength);\n        var getChar = String.fromCharCode;\n        //var buff2 = new Array(buff.length);\n        var str = '';\n\n        for (var i = 0, li = buff.length; i < li; i++) {\n            //buff2[i] = getChar(buff[i]);\n            str += getChar(buff[i]);\n        }\n\n        return str;\n        //return buff2.join('');\n        */\n\n        var s = '';\n        //var code_points2 = new Uint8Array(array.buffer, array.byteOffset, array.byteLength);\n        var code_points2 = new Uint8Array(array.byteLength);\n        code_points2.set(array);\n        var code_points = new Uint32Array(code_points2.buffer);\n\n        for (var i = 0, li = code_points.length; i < li; ++i) {\n          var cp = code_points[i];\n          if (cp <= 0xFFFF) {\n            s += String.fromCharCode(cp);\n          } else {\n            cp -= 0x10000;\n            s += String.fromCharCode((cp >> 10) + 0xD800,\n                                     (cp & 0x3FF) + 0xDC00);\n          }\n        }\n        return s;\n\n    }\n}\n\n\nexport {utils};\n\n// only implement if no native implementation is available\n/*\nif (typeof Array.isArray === 'undefined') {\n  Array.isArray = (function(obj) {\n    return Object.prototype.toString.call(obj) === '[object Array]';\n  });\n}*/\n","\nimport {math as math_} from '../../utils/math';\nimport {vec3 as vec3_} from '../../utils/matrix';\nimport {utils as utils_} from '../../utils/utils';\nimport {utilsUrl as utilsUrl_} from '../../utils/url';\n\n\n\n//get rid of compiler mess\nvar math = math_;\nvar vec3 = vec3_;\nvar utils = utils_;\nvar utilsUrl = utilsUrl_;\n\nvar MapGeodataImport3DTiles2 = function() {\n    this.bintree = null;\n    this.pathTable = null;\n    this.totalNodes = 0;\n    this.pathTableSize = 1;\n    this.nodesIndex = 0;\n    this.rootSize = 1;\n};\n\nMapGeodataImport3DTiles2.prototype.countNode = function(node, onlyChildren) {\n    this.totalNodes++;\n\n\n    var content = node['content'];\n\n    if (content && content['uri']) {\n        var path = content['uri'];\n\n        var tmp = path.split(\".\");\n        if (tmp.length > 1) {\n            \n            var ext = tmp[tmp.length - 1];\n            tmp.pop();\n            var stmp = tmp.join('.');\n\n            if (ext == \"json\") {\n                this.pathTableSize += stmp.length + 1 + 4;\n            } else if (ext == \"mesh\") {\n                this.pathTableSize += stmp.length + 1;\n            }\n        }\n    }\n\n\n    var children = node['children'];\n\n    if (children) {\n        for (var i = 0, li = children.length; i < li; i++) {\n            this.countNode(children[i]);\n        }\n    }\n};\n\nMapGeodataImport3DTiles2.prototype.processNodeOctant = function(node, originalOctant) {\n    var content = node['content'];\n\n    if (content && content['uri']) {\n        var path = content['uri'];\n\n        var tmp = path.split(\".\");\n        if (tmp.length > 1) {\n\n            var ext = tmp[tmp.length - 1];\n            tmp.pop();\n            var stmp = tmp.join('.');\n\n            if (ext == \"json\") {\n                \n                tmp = stmp.split(\"-\");\n                \n                /*\n                var node2 = node;\n                \n                for (var i = 1, li = tmp.length; i < li; i++ ) {\n                    \n                    node2.octant = parseInt(tmp[tmp.length - i]);\n                    \n                    if (node2.parent) {\n                        node2 = node2.parent;\n                    } else {\n                        break;\n                    }\n                }\n                */\n            } else if (ext == \"mesh\") {\n                \n                var fname = tmp;\n                \n                tmp = stmp.split(\"/\");\n                tmp = tmp[tmp.length - 1];\n                tmp = tmp.split(\"-\");\n\n                var ix = parseInt(tmp[tmp.length - 3]);\n                var iy = parseInt(tmp[tmp.length - 2]);\n                var iz = parseInt(tmp[tmp.length - 1]);\n\n                var octant = (ix % 2) + (iy % 2)*2 + ((iz+1) % 2)*4;\n                \n                console.log(\"octant: node: \" + originalOctant + \" mesh:\" + octant + \"   \"  + fname);\n            }\n        }\n    }\n \n};\n\n\nMapGeodataImport3DTiles2.prototype.processNode = function(node, index, lod, onlyChildren) {\n\n    var index2 = index * 9;\n\n    //debugger\n    var content = node['content'];\n\n    if (content && content['uri']) {\n        var path = content['uri'];\n\n        var tmp = path.split(\".\");\n        if (tmp.length > 1) {\n            \n            var ext = tmp[tmp.length - 1];\n            tmp.pop();\n            var stmp = tmp.join('.');\n\n            if (ext == \"json\") {\n                this.bintree[index2] = this.pathTableSize | (1<<31);\n                this.pathTableSize += 4;\n            } else if (ext == \"mesh\") {\n                this.bintree[index2] = this.pathTableSize;\n            }\n\n            for (var i = 0, li = stmp.length; i < li; i++) {\n                this.pathTable[this.pathTableSize++] = stmp.charCodeAt(i);\n            }\n            \n            this.pathTable[this.pathTableSize++] = 0;\n        }\n    }\n\n    var children = node['children'];\n\n    if (children) {\n\n        for (var i = 0, li = children.length; i < li; i++) {\n            var child = children[i];\n            var boundingVolume = child['boundingVolume'];\n\n            if (boundingVolume) {\n                \n                var extras = child['extras'];\n                var octant = 0;\n                \n                if (extras) {\n                    octant = extras['ci'];\n                }\n                \n                \n                var ix = octant & 1;\n                var iy = (octant & (1<<1)) >> 1;\n                var iz = (octant & (1<<2)) >> 2;\n                \n                /*\n                switch(octant) {\n                    case 0: octant = 4; break;\n                    case 1: octant = 5; break;\n                    case 2: octant = 6; break;\n                    case 3: octant = 7; break;\n                    case 4: octant = 0; break; //\n                    case 5: octant = 1; break; //\n                    case 6: octant = 2; break; //\n                    case 7: octant = 3; break; //\n                }*/\n                \n                //this.processNodeOctant(child, octant);*/\n\n                /*\n                if (lod > 1) {\n                    iy = 1 - iy;\n                }*/\n\n                //iz = 1 - iz;\n                \n                //octant = (ix<<0) + (iy << 1) + (iz << 2);\n                //octant = (ix<<0) + (iy << 1) + (iz << 2);\n                \n                //octant = 0;\n                \n                if (boundingVolume['region']) {\n                    \n                    this.totalNodes++;\n                    var childIndex = this.totalNodes;\n                    \n                    this.bintree[index2 + 1 + octant] = childIndex;\n\n                    this.processNode(child, childIndex, lod + 1);\n                }\n            }\n        }\n        \n        var testCount = 0;\n        for (var i = 0, li = 8; i < li; i++) {\n            if (this.bintree[index2 + 1 + i]) {\n                testCount++;\n            }\n        }\n\n        if (testCount != children.length) {\n            console.log('duplicit octants!!!');\n        }        \n    }\n};\n\n\nMapGeodataImport3DTiles2.prototype.processJSON = function(json, options) {\n    if (!json) {\n        return;\n    }\n\n    this.rootPath = '';\n\n    this.countNode(json['root']);\n    //alloc memory\n    this.bintree = new Uint32Array(this.totalNodes*9);\n    this.pathTable = new Uint8Array(this.pathTableSize+1);\n\n    this.totalNodes = 0;\n    this.pathTableSize = 1;\n\n    //debugger\n\n    if (options.root) {\n        \n        var extras = json['extras'];\n        var points = extras['extents'];\n\n        var center = [ (points[0][0]+points[1][0]+points[2][0]+points[3][0]+points[4][0]+points[5][0]+points[6][0]+points[7][0])/8,\n                       (points[0][1]+points[1][1]+points[2][1]+points[3][1]+points[4][1]+points[5][1]+points[6][1]+points[7][1])/8,\n                       (points[0][2]+points[1][2]+points[2][2]+points[3][2]+points[4][2]+points[5][2]+points[6][2]+points[7][2])/8 ];\n\n       var yv = [(points[1][0] - points[0][0]), (points[1][1] - points[0][1]), (points[1][2] - points[0][2])];\n       var xv = [(points[1][0] - points[2][0]), (points[1][1] - points[2][1]), (points[1][2] - points[2][2])];\n       var zv = [(points[4][0] - points[0][0]), (points[4][1] - points[0][1]), (points[4][2] - points[0][2])];\n\n       yv[0] = -yv[0];\n       yv[1] = -yv[1];\n       yv[2] = -yv[2];\n\n       xv[0] = -xv[0];\n       xv[1] = -xv[1];\n       xv[2] = -xv[2];\n       \n       /*zv[0] = -zv[0];\n       zv[1] = -zv[1];\n       zv[2] = -zv[2];*/\n       \n\n       var p = points[1];\n\n        this.rootPoints = [\n\n            [p[0],\n             p[1],\n             p[2]],\n\n            [p[0] + xv[0],\n             p[1] + xv[1],\n             p[2] + xv[2]],\n\n            [p[0] + xv[0] + yv[0],\n             p[1] + xv[1] + yv[1],\n             p[2] + xv[2] + yv[2]],\n\n            [p[0] + yv[0],\n             p[1] + yv[1],\n             p[2] + yv[2]],\n\n            [p[0] + zv[0],\n             p[1] + zv[1],\n             p[2] + zv[2]],\n\n            [p[0] + xv[0] + zv[0],\n             p[1] + xv[1] + zv[1],\n             p[2] + xv[2] + zv[2]],\n\n            [p[0] + xv[0] + yv[0] + zv[0],\n             p[1] + xv[1] + yv[1] + zv[1],\n             p[2] + xv[2] + yv[2] + zv[2]],\n\n            [p[0] + yv[0] + zv[0],\n             p[1] + yv[1] + zv[1],\n             p[2] + yv[2] + zv[2]]\n        \n        ];\n\n        //this.rootPoints = points;\n        this.rootCenter = center;\n        this.rootRadius = vec3.distance(center, points[0]);\n        this.rootTexelSize = extras['nominalResolution'] * Math.pow(2,extras['depth']);\n    } else {\n        this.rootPoints = [];\n        this.rootCenter = [];\n        this.rootRadius = 1;\n        this.rootTexelSize = 1;\n    }\n\n    this.processNode(json['root'], 0, 0);\n    this.totalNodes++;\n};\n\n\nMapGeodataImport3DTiles2.prototype.loadJSON = function(path, options, onLoaded) {\n    utils.loadJSON(path, this.onLoaded.bind(this, options, onLoaded), null);\n};\n\nMapGeodataImport3DTiles2.prototype.onLoaded = function(options, onLoaded, json) {\n    this.processJSON(json, options);\n    \n    if (onLoaded) {\n        onLoaded(options, {\n                   'bintree': this.bintree,\n                   'pathTable': this.pathTable,\n                   'totalNodes': this.totalNodes,\n                   'rootSize': this.rootSize,\n                   'points': this.rootPoints,\n                   'center': this.rootCenter,\n                   'radius': this.rootRadius,\n                   'texelSize': this.rootTexelSize\n               });\n    }\n}\n\nexport default MapGeodataImport3DTiles2;\n\n\n\n\n\n\n\n\n\n","\nimport {globals as globals_} from './worker-globals.js';\nimport {parseMesh as parseMesh_} from './worker-mesh.js';\nimport MapGeodataImport3DTiles2_ from '../geodata-import/3dtiles2';\n\n\n//get rid of compiler mess\nvar globals = globals_;\nvar parseMesh = parseMesh_;\nvar MapGeodataImport3DTiles2 = MapGeodataImport3DTiles2_;\n\nvar packedEvents = [];\nvar packedTransferables = [];\n\nfunction postPackedMessage(message, transferables) {\n\n    if (globals.config.mapPackLoaderEvents) {\n\n        packedEvents.push(message);\n\n        if (transferables) {\n            packedTransferables = packedTransferables.concat(transferables);\n        }\n\n    } else {\n\n        if (transferables) {\n            postMessage(message, transferables);\n        } else {\n            postMessage(message);\n        }\n\n    }\n}\n\nfunction loadBinary(path, onLoaded, onError, withCredentials, xhrParams, responseType, kind, options) {\n    var xhr = new XMLHttpRequest();\n\n    xhr.onreadystatechange = (function (){\n\n        switch (xhr.readyState) {\n        case 0 : // UNINITIALIZED\n        case 1 : // LOADING\n        case 2 : // LOADED\n        case 3 : // INTERACTIVE\n            break;\n        case 4 : // COMPLETED\n    \n            if (xhr.status >= 400 || xhr.status == 0) {\n                if (onError) {\n                    postPackedMessage({'command' : 'on-error', 'path': path, 'status':xhr.status});\n                }\n                break;\n            }\n    \n            var abuffer = xhr.response;\n                    \n            if (!abuffer) {\n                if (onError) {\n                    postPackedMessage({'command' : 'on-error', 'path': path});\n                }\n                break;\n            }\n    \n            if (onLoaded) {\n                if (kind == 'direct-texture') {\n                    createImageBitmap(abuffer).then((function(bitmap){\n                        postPackedMessage({'command' : 'on-loaded', 'path': path, 'data': bitmap, 'filesize': abuffer.size}, [bitmap]);                        \n                    }).bind(this));\n                } else if (kind == 'direct-mesh') {\n                    var data = parseMesh({data:new DataView(abuffer), index:0});\n                    postPackedMessage({'command' : 'on-loaded', 'path': path, 'data': data.mesh}, data.transferables);\n                } else if (kind == 'direct-3dtiles') {\n                    //debugger\n                    var data = parse3DTile(JSON.parse(abuffer), options);\n                    //postPackedMessage({'command' : 'on-loaded', 'path': path, 'data': data.geodata}, data.transferables);\n                    postMessage({'command' : 'on-loaded', 'path': path, 'data': data.geodata}, data.transferables);\n                } else {\n                    postPackedMessage({'command' : 'on-loaded', 'path': path, 'data': abuffer}, [abuffer]);\n                }\n            }\n    \n            break;\n    \n        default:\n    \n            if (onError) {\n                postPackedMessage({'command' : 'on-error', 'path': path});\n            }\n    \n            break;\n        }\n\n    }).bind(this);\n    \n    /*\n    xhr.onerror  = (function() {\n        if (onError) {\n            onError();\n        }\n    }).bind(this);*/\n\n    xhr.open('GET', path, true);\n    xhr.responseType = responseType ? responseType : 'arraybuffer';\n    xhr.withCredentials = withCredentials;\n\n    if (xhrParams && xhrParams['token'] /*&& xhrParams[\"tokenHeader\"]*/) {\n        //xhr.setRequestHeader(xhrParams[\"tokenHeader\"], xhrParams[\"token\"]); //old way\n        xhr.setRequestHeader('Accept', 'token/' + xhrParams['token'] + ', */*');\n    }\n\n    xhr.send('');\n};\n\nfunction parse3DTile(json, options) {\n\n    var geodata = new MapGeodataImport3DTiles2();\n    geodata.processJSON(json, options);\n\n    return { geodata:{\n                'bintree': geodata.bintree,\n                'pathTable': geodata.pathTable,\n                'totalNodes': geodata.totalNodes,\n                'rootSize': geodata.rootSize,\n                'points': geodata.rootPoints,\n                'center': geodata.rootCenter,\n                'radius': geodata.rootRadius,\n                'texelSize': geodata.rootTexelSize\n             },\n             transferables:[geodata.bintree.buffer, geodata.pathTable.buffer]\n           };\n\n}\n\nself.onmessage = function (e) {\n    var message = e.data;\n    var command = message['command'];\n    //var data = message['data'];\n\n    //console.log(\"workeronmessage: \" + command);\n\n    switch(command) {\n\n        case 'config':\n            globals.config = message['data'];\n            break;\n\n        case 'tick':\n\n            if (packedEvents.length > 0) {\n                if (packedTransferables.length > 0) {\n                    postMessage({'command': 'packed-events', 'messages':packedEvents}, packedTransferables);\n                } else {\n                    postMessage({'command': 'packed-events', 'messages':packedEvents});\n                }\n            }\n\n            packedEvents = [];\n            packedTransferables = [];\n\n            break;\n\n        case 'load-binary':\n            loadBinary(message['path'], true, true, message['withCredentials'], message['xhrParams'], message['responseType'], message['kind'], message['options']);\n            break;\n\n    }\n};\n\n"],"sourceRoot":""}